using System.Collections.Generic;
using System;

#if UNITY_64
using UnityEngine;
#endif

public class InfiniteRotationAnimatronic : Animatronic
{
    private float _angular_speed = 16.0f;

    // public InfiniteRotationAnimatronic(
    // 	long start_step,
    // 	long finish_step,
    // ) : base(start_step, finish_step)
    // {
    // }

    public Quaternion Rotation(Int64 stepstamp, ITimeline tl)
    {
        return Quaternion.Euler(
            0,
            0,
            _angular_speed * Utility.DurationFromSteps(stepstamp - start_step)
        );
    }

    public Quaternion Rotation_RealTime(float time, ITimeline tl)
    {
        var start_time = Utility.DurationFromSteps(start_step);
        return Quaternion.Euler(0, 0, _angular_speed * (time - start_time));
    }

    public InfiniteRotationAnimatronic(float angular_speed)
    {
        _angular_speed = angular_speed;
    }

    public override ReferencedPose GetReferencedPose(long stepstamp, ITimeline tl)
    {
        var rot = Rotation(stepstamp, tl);
        return new ReferencedPose(new Vector3(0, 0, 0), rot, default(ObjectId));
    }

    public override ReferencedPose GetReferencedPose_RealTime(float time, ITimeline tl)
    {
        var rot = Rotation_RealTime(time, tl);
        return new ReferencedPose(new Vector3(0, 0, 0), rot, default(ObjectId));
    }

    public override AnimationType GetAnimationType(long local_step)
    {
        return AnimationType.None;
    }

    public override ReferencedScrew GetReferencedVelocityScrew(Int64 stepstamp, ITimeline tl)
    {
        return new ReferencedScrew(
            new Vector3(0, 0, 0),
            new Vector3(0, 0, _angular_speed),
            default(ObjectId)
        );
    }

    //BEGIN################################################################
    // This code was generated by FieldScanner

    public override long HashCode()
    {
        long result = 0;
        result = FieldScanner.ModifyHash(result, _angular_speed);
        result = FieldScanner.ModifyHash(result, _initial_animation_time);
        result = FieldScanner.ModifyHash(result, unchanged_start_step);
        result = FieldScanner.ModifyHash(result, unchanged_finish_step);
        result = FieldScanner.ModifyHash(result, start_step);
        result = FieldScanner.ModifyHash(result, finish_step);
        return result;
    }

    public override bool Equals(object obj)
    {
        if (obj == null)
            return false;
        if (obj.GetType() != GetType())
            return false;
        var other = obj as InfiniteRotationAnimatronic;
        return _angular_speed == other._angular_speed
            && _initial_animation_time == other._initial_animation_time
            && unchanged_start_step == other.unchanged_start_step
            && unchanged_finish_step == other.unchanged_finish_step
            && start_step == other.start_step
            && finish_step == other.finish_step
            && true;
    }

    public override int GetHashCode()
    {
        return (int)HashCode();
    }
    //END################################################################
}
