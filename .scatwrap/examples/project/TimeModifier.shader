<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>examples/project/TimeModifier.shader</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
@program&nbsp;TimeModifier<br>
<br>
//&nbsp;============================================================<br>
//&nbsp;Time&nbsp;Modifier&nbsp;Post-Process&nbsp;Shader<br>
//&nbsp;============================================================<br>
//<br>
//&nbsp;Post-processing&nbsp;effect&nbsp;for&nbsp;ChronoSquad&nbsp;time&nbsp;mechanics.<br>
//&nbsp;Changes&nbsp;color&nbsp;based&nbsp;on&nbsp;world&nbsp;time&nbsp;modifier:<br>
//&nbsp;&nbsp;&nbsp;-&nbsp;time_modifier&nbsp;&lt;&nbsp;0:&nbsp;blue&nbsp;tint&nbsp;(reverse&nbsp;time)<br>
//&nbsp;&nbsp;&nbsp;-&nbsp;time_modifier&nbsp;=&nbsp;0:&nbsp;grayscale&nbsp;(pause)<br>
//&nbsp;&nbsp;&nbsp;-&nbsp;0&nbsp;&lt;&nbsp;time_modifier&nbsp;&lt;&nbsp;1:&nbsp;grayscale&nbsp;to&nbsp;color&nbsp;gradient<br>
//&nbsp;&nbsp;&nbsp;-&nbsp;time_modifier&nbsp;=&nbsp;1:&nbsp;normal&nbsp;color<br>
//&nbsp;&nbsp;&nbsp;-&nbsp;time_modifier&nbsp;&gt;&nbsp;1:&nbsp;red&nbsp;tint&nbsp;(fast&nbsp;forward)<br>
//<br>
//&nbsp;Also&nbsp;draws&nbsp;a&nbsp;grid&nbsp;overlay&nbsp;when&nbsp;time&nbsp;is&nbsp;paused&nbsp;(time_modifier&nbsp;&lt;&nbsp;1).<br>
//<br>
//&nbsp;============================================================<br>
<br>
@phase&nbsp;opaque<br>
@priority&nbsp;0<br>
@glDepthTest&nbsp;false<br>
@glDepthMask&nbsp;false<br>
@glCull&nbsp;false<br>
<br>
@property&nbsp;Float&nbsp;u_time_modifier&nbsp;=&nbsp;1.0&nbsp;range(-2.0,&nbsp;3.0)<br>
@property&nbsp;Float&nbsp;u_grid_intensity&nbsp;=&nbsp;0.3&nbsp;range(0.0,&nbsp;1.0)<br>
@property&nbsp;Float&nbsp;u_grid_scale&nbsp;=&nbsp;1.0&nbsp;range(0.1,&nbsp;10.0)<br>
@property&nbsp;Float&nbsp;u_grid_line_width&nbsp;=&nbsp;0.03&nbsp;range(0.01,&nbsp;0.1)<br>
@property&nbsp;Color&nbsp;u_grid_color&nbsp;=&nbsp;Color(0.0,&nbsp;0.9,&nbsp;0.4,&nbsp;1.0)<br>
<br>
@property&nbsp;Texture2D&nbsp;u_input_tex&nbsp;=&nbsp;&quot;white&quot;<br>
@property&nbsp;Texture2D&nbsp;u_depth_texture&nbsp;=&nbsp;&quot;depth_default&quot;<br>
@property&nbsp;Texture2D&nbsp;u_normal_texture&nbsp;=&nbsp;&quot;normal_default&quot;<br>
<br>
@stage&nbsp;vertex<br>
#version&nbsp;330&nbsp;core<br>
<br>
layout(location&nbsp;=&nbsp;0)&nbsp;in&nbsp;vec2&nbsp;a_pos;<br>
layout(location&nbsp;=&nbsp;1)&nbsp;in&nbsp;vec2&nbsp;a_uv;<br>
<br>
out&nbsp;vec2&nbsp;v_uv;<br>
<br>
void&nbsp;main()&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;v_uv&nbsp;=&nbsp;a_uv;<br>
&nbsp;&nbsp;&nbsp;&nbsp;gl_Position&nbsp;=&nbsp;vec4(a_pos,&nbsp;0.0,&nbsp;1.0);<br>
}<br>
@endstage<br>
<br>
@stage&nbsp;fragment<br>
#version&nbsp;330&nbsp;core<br>
<br>
in&nbsp;vec2&nbsp;v_uv;<br>
<br>
uniform&nbsp;sampler2D&nbsp;u_input_tex;<br>
uniform&nbsp;sampler2D&nbsp;u_depth_texture;<br>
uniform&nbsp;sampler2D&nbsp;u_normal_texture;<br>
uniform&nbsp;vec2&nbsp;u_resolution;<br>
uniform&nbsp;float&nbsp;u_time_modifier;<br>
uniform&nbsp;float&nbsp;u_grid_intensity;<br>
uniform&nbsp;float&nbsp;u_grid_scale;<br>
uniform&nbsp;float&nbsp;u_grid_line_width;<br>
uniform&nbsp;vec4&nbsp;u_grid_color;<br>
<br>
uniform&nbsp;float&nbsp;u_near;<br>
uniform&nbsp;float&nbsp;u_far;<br>
uniform&nbsp;mat4&nbsp;u_inv_view;<br>
uniform&nbsp;mat4&nbsp;u_inv_proj;<br>
<br>
out&nbsp;vec4&nbsp;FragColor;<br>
<br>
//&nbsp;Reconstruct&nbsp;world&nbsp;position&nbsp;from&nbsp;depth&nbsp;and&nbsp;screen&nbsp;UV<br>
vec3&nbsp;reconstruct_world_pos(vec2&nbsp;uv,&nbsp;float&nbsp;linear_depth)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Screen&nbsp;UV&nbsp;to&nbsp;NDC&nbsp;xy&nbsp;(-1&nbsp;to&nbsp;1)<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec2&nbsp;ndc_xy&nbsp;=&nbsp;uv&nbsp;*&nbsp;2.0&nbsp;-&nbsp;1.0;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Unproject&nbsp;near&nbsp;and&nbsp;far&nbsp;points<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec4&nbsp;near_ndc&nbsp;=&nbsp;vec4(ndc_xy,&nbsp;-1.0,&nbsp;1.0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec4&nbsp;far_ndc&nbsp;=&nbsp;vec4(ndc_xy,&nbsp;1.0,&nbsp;1.0);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec4&nbsp;near_view&nbsp;=&nbsp;u_inv_proj&nbsp;*&nbsp;near_ndc;<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec4&nbsp;far_view&nbsp;=&nbsp;u_inv_proj&nbsp;*&nbsp;far_ndc;<br>
&nbsp;&nbsp;&nbsp;&nbsp;near_view&nbsp;/=&nbsp;near_view.w;<br>
&nbsp;&nbsp;&nbsp;&nbsp;far_view&nbsp;/=&nbsp;far_view.w;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Interpolate&nbsp;between&nbsp;near&nbsp;and&nbsp;far&nbsp;based&nbsp;on&nbsp;linear&nbsp;depth<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;view_pos&nbsp;=&nbsp;mix(near_view.xyz,&nbsp;far_view.xyz,&nbsp;linear_depth);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Transform&nbsp;to&nbsp;world&nbsp;space<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec4&nbsp;world_pos&nbsp;=&nbsp;u_inv_view&nbsp;*&nbsp;vec4(view_pos,&nbsp;1.0);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;world_pos.xyz;<br>
}<br>
<br>
//&nbsp;Convert&nbsp;color&nbsp;based&nbsp;on&nbsp;time&nbsp;modifier<br>
vec3&nbsp;get_modified_color(vec3&nbsp;color,&nbsp;float&nbsp;time_mod)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Grayscale&nbsp;value<br>
&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;grayscale&nbsp;=&nbsp;dot(color,&nbsp;vec3(0.2126,&nbsp;0.7152,&nbsp;0.0722));<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;gray&nbsp;=&nbsp;vec3(grayscale);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(time_mod&nbsp;&lt;&nbsp;0.0)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Reverse&nbsp;time:&nbsp;blue/cyan&nbsp;tint<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;modifier&nbsp;=&nbsp;-time_mod&nbsp;*&nbsp;0.1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modifier&nbsp;=&nbsp;clamp(modifier,&nbsp;0.0,&nbsp;1.0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;blue_tint&nbsp;=&nbsp;vec3(gray.r&nbsp;*&nbsp;0.5,&nbsp;gray.g&nbsp;*&nbsp;0.7,&nbsp;grayscale&nbsp;*&nbsp;1.5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mix(gray,&nbsp;blue_tint,&nbsp;modifier);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(time_mod&nbsp;&lt;&nbsp;1.0)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Pause/slow:&nbsp;grayscale&nbsp;to&nbsp;color&nbsp;gradient<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;gray_coeff&nbsp;=&nbsp;1.0&nbsp;-&nbsp;time_mod;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mix(color,&nbsp;gray,&nbsp;gray_coeff);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(time_mod&nbsp;&gt;&nbsp;1.0)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Fast&nbsp;forward:&nbsp;red&nbsp;tint<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;modifier&nbsp;=&nbsp;(time_mod&nbsp;-&nbsp;1.0)&nbsp;*&nbsp;0.05;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modifier&nbsp;=&nbsp;clamp(modifier,&nbsp;0.0,&nbsp;1.0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;red_tint&nbsp;=&nbsp;vec3(color.r&nbsp;*&nbsp;1.5,&nbsp;color.g&nbsp;*&nbsp;0.5,&nbsp;color.b&nbsp;*&nbsp;0.5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mix(color,&nbsp;red_tint,&nbsp;modifier);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Normal&nbsp;speed&nbsp;(time_mod&nbsp;==&nbsp;1.0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;color;<br>
}<br>
<br>
//&nbsp;World-space&nbsp;grid&nbsp;based&nbsp;on&nbsp;ChronoCore&nbsp;original<br>
//&nbsp;Returns&nbsp;1.0&nbsp;if&nbsp;pixel&nbsp;is&nbsp;on&nbsp;grid&nbsp;line,&nbsp;0.0&nbsp;otherwise<br>
//&nbsp;Uses&nbsp;surface&nbsp;normal&nbsp;to&nbsp;avoid&nbsp;drawing&nbsp;lines&nbsp;on&nbsp;surfaces&nbsp;parallel&nbsp;to&nbsp;that&nbsp;line<br>
float&nbsp;world_grid(vec3&nbsp;world_pos,&nbsp;vec3&nbsp;normal,&nbsp;float&nbsp;scale,&nbsp;float&nbsp;line_width)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Compute&nbsp;fractional&nbsp;position&nbsp;in&nbsp;grid&nbsp;cells<br>
&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;frac_x&nbsp;=&nbsp;fract(world_pos.x&nbsp;/&nbsp;scale);<br>
&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;frac_y&nbsp;=&nbsp;fract(world_pos.y&nbsp;/&nbsp;scale);<br>
&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;frac_z&nbsp;=&nbsp;fract(world_pos.z&nbsp;/&nbsp;scale);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Check&nbsp;if&nbsp;near&nbsp;grid&nbsp;line&nbsp;on&nbsp;any&nbsp;axis<br>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;on_x&nbsp;=&nbsp;(frac_x&nbsp;&lt;&nbsp;line_width)&nbsp;||&nbsp;(frac_x&nbsp;&gt;&nbsp;1.0&nbsp;-&nbsp;line_width);<br>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;on_y&nbsp;=&nbsp;(frac_y&nbsp;&lt;&nbsp;line_width)&nbsp;||&nbsp;(frac_y&nbsp;&gt;&nbsp;1.0&nbsp;-&nbsp;line_width);<br>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;on_z&nbsp;=&nbsp;(frac_z&nbsp;&lt;&nbsp;line_width)&nbsp;||&nbsp;(frac_z&nbsp;&gt;&nbsp;1.0&nbsp;-&nbsp;line_width);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Only&nbsp;draw&nbsp;grid&nbsp;line&nbsp;if&nbsp;surface&nbsp;is&nbsp;NOT&nbsp;parallel&nbsp;to&nbsp;that&nbsp;axis<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;(i.e.,&nbsp;normal&nbsp;component&nbsp;is&nbsp;not&nbsp;dominant)<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Threshold&nbsp;0.9&nbsp;means:&nbsp;skip&nbsp;line&nbsp;if&nbsp;surface&nbsp;is&nbsp;nearly&nbsp;perpendicular&nbsp;to&nbsp;view&nbsp;axis<br>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;show_x&nbsp;=&nbsp;abs(normal.x)&nbsp;&lt;&nbsp;0.9&nbsp;&amp;&amp;&nbsp;on_x;<br>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;show_y&nbsp;=&nbsp;abs(normal.y)&nbsp;&lt;&nbsp;0.9&nbsp;&amp;&amp;&nbsp;on_y;<br>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;show_z&nbsp;=&nbsp;abs(normal.z)&nbsp;&lt;&nbsp;0.9&nbsp;&amp;&amp;&nbsp;on_z;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(show_x&nbsp;||&nbsp;show_y&nbsp;||&nbsp;show_z)&nbsp;?&nbsp;1.0&nbsp;:&nbsp;0.0;<br>
}<br>
<br>
vec4&nbsp;doit()<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;normal_shifted&nbsp;=&nbsp;texture(u_normal_texture,&nbsp;v_uv).rgb;<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;normal&nbsp;=&nbsp;normal_shifted&nbsp;*&nbsp;2.0&nbsp;-&nbsp;1.0;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;color&nbsp;=&nbsp;texture(u_input_tex,&nbsp;v_uv).rgb;<br>
&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;linear_depth&nbsp;=&nbsp;texture(u_depth_texture,&nbsp;v_uv).r;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//DEBUG:<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;return&nbsp;vec4(vec3(linear_depth),&nbsp;1.0);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Reconstruct&nbsp;world&nbsp;position<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;world_pos&nbsp;=&nbsp;reconstruct_world_pos(v_uv,&nbsp;linear_depth);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//return&nbsp;vec4(world_pos,&nbsp;1.0);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//return&nbsp;vec4(world_pos,&nbsp;1.0);&nbsp;//&nbsp;DEBUG:&nbsp;visualize&nbsp;world&nbsp;position<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Apply&nbsp;time-based&nbsp;color&nbsp;modification<br>
&nbsp;&nbsp;&nbsp;&nbsp;vec3&nbsp;modified&nbsp;=&nbsp;get_modified_color(color,&nbsp;u_time_modifier);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Draw&nbsp;world-space&nbsp;grid&nbsp;when&nbsp;time&nbsp;is&nbsp;slowed/paused<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(u_time_modifier&nbsp;&lt;&nbsp;1.0&nbsp;&amp;&amp;&nbsp;u_grid_intensity&nbsp;&gt;&nbsp;0.0)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Skip&nbsp;grid&nbsp;for&nbsp;sky&nbsp;(very&nbsp;far&nbsp;pixels)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(linear_depth&nbsp;&lt;&nbsp;0.99)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;g&nbsp;=&nbsp;world_grid(world_pos,&nbsp;normal,&nbsp;u_grid_scale,&nbsp;u_grid_line_width);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;if&nbsp;(g&nbsp;&lt;&nbsp;0.5)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;vec4(0.0,&nbsp;0.0,&nbsp;0.0,&nbsp;1.0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;else&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;vec4(1.0,&nbsp;1.0,&nbsp;1.0,&nbsp;1.0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Grid&nbsp;visibility&nbsp;depends&nbsp;on&nbsp;how&nbsp;much&nbsp;time&nbsp;is&nbsp;slowed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;grid_alpha&nbsp;=&nbsp;g&nbsp;*&nbsp;u_grid_intensity&nbsp;*&nbsp;(1.0&nbsp;-&nbsp;u_time_modifier);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modified&nbsp;=&nbsp;mix(modified,&nbsp;u_grid_color.rgb,&nbsp;grid_alpha);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;//return&nbsp;vec4(1.0,&nbsp;0.0,&nbsp;0.0,&nbsp;1.0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;//modified&nbsp;=&nbsp;vec3(modified.r,&nbsp;modified.g,&nbsp;0.0);&nbsp;//&nbsp;DEBUG:&nbsp;visualize&nbsp;red&nbsp;and&nbsp;green&nbsp;channels&nbsp;only<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;vec4(modified,&nbsp;1.0);&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;//return&nbsp;vec4(1.0,&nbsp;0.0,&nbsp;0.0,&nbsp;1.0);&nbsp;//&nbsp;DEBUG:&nbsp;visualize&nbsp;red&nbsp;channel&nbsp;only<br>
<br>
<br>
}<br>
<br>
void&nbsp;main()&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;FragColor&nbsp;=&nbsp;vec4(u_time_modifier,&nbsp;,&nbsp;0.0,&nbsp;1.0);&nbsp;//&nbsp;DEBUG:&nbsp;visualize&nbsp;red&nbsp;channel&nbsp;only<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;return;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;FragColor&nbsp;=&nbsp;doit();<br>
}<br>
@endstage<br>
<br>
@endphase<br>
<!-- END SCAT CODE -->
</body>
</html>
