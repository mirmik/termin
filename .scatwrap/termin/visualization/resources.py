<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>termin/visualization/resources.py</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
#&nbsp;termin/visualization/resources.py<br>
from&nbsp;__future__&nbsp;import&nbsp;annotations<br>
<br>
from&nbsp;dataclasses&nbsp;import&nbsp;dataclass,&nbsp;field<br>
from&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;Optional,&nbsp;TYPE_CHECKING<br>
<br>
if&nbsp;TYPE_CHECKING:&nbsp;&nbsp;#&nbsp;только&nbsp;для&nbsp;типов,&nbsp;чтобы&nbsp;не&nbsp;ловить&nbsp;циклы&nbsp;импортов<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;.material&nbsp;import&nbsp;Material<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;.mesh&nbsp;import&nbsp;MeshDrawable<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;.texture&nbsp;import&nbsp;Texture<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;.entity&nbsp;import&nbsp;Component<br>
<br>
<br>
<br>
@dataclass<br>
class&nbsp;ResourceManager:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Хранилище&nbsp;ресурсов,&nbsp;привязанное&nbsp;к&nbsp;конкретному&nbsp;редактору/сцене.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Никаких&nbsp;глобальных&nbsp;синглтонов.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;materials:&nbsp;Dict[str,&nbsp;&quot;Material&quot;]&nbsp;=&nbsp;field(default_factory=dict)<br>
&nbsp;&nbsp;&nbsp;&nbsp;meshes:&nbsp;Dict[str,&nbsp;&quot;MeshDrawable&quot;]&nbsp;=&nbsp;field(default_factory=dict)<br>
&nbsp;&nbsp;&nbsp;&nbsp;textures:&nbsp;Dict[str,&nbsp;&quot;Texture&quot;]&nbsp;=&nbsp;field(default_factory=dict)<br>
&nbsp;&nbsp;&nbsp;&nbsp;components:&nbsp;Dict[str,&nbsp;type[&quot;Component&quot;]]&nbsp;=&nbsp;field(default_factory=dict)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;---------&nbsp;Материалы&nbsp;---------<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;register_material(self,&nbsp;name:&nbsp;str,&nbsp;mat:&nbsp;&quot;Material&quot;):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.materials[name]&nbsp;=&nbsp;mat<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_material(self,&nbsp;name:&nbsp;str)&nbsp;-&gt;&nbsp;Optional[&quot;Material&quot;]:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.materials.get(name)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;list_material_names(self)&nbsp;-&gt;&nbsp;list[str]:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;sorted(self.materials.keys())<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;find_material_name(self,&nbsp;mat:&nbsp;&quot;Material&quot;)&nbsp;-&gt;&nbsp;Optional[str]:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;n,&nbsp;m&nbsp;in&nbsp;self.materials.items():<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;m&nbsp;is&nbsp;mat:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;n<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;---------&nbsp;Меши&nbsp;---------<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;register_mesh(self,&nbsp;name:&nbsp;str,&nbsp;mesh:&nbsp;&quot;MeshDrawable&quot;):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.meshes[name]&nbsp;=&nbsp;mesh<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_mesh(self,&nbsp;name:&nbsp;str)&nbsp;-&gt;&nbsp;Optional[&quot;MeshDrawable&quot;]:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.meshes.get(name)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;list_mesh_names(self)&nbsp;-&gt;&nbsp;list[str]:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;sorted(self.meshes.keys())<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;find_mesh_name(self,&nbsp;mesh:&nbsp;&quot;MeshDrawable&quot;)&nbsp;-&gt;&nbsp;Optional[str]:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;n,&nbsp;m&nbsp;in&nbsp;self.meshes.items():<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;m&nbsp;is&nbsp;mesh:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;n<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;---------&nbsp;Компоненты&nbsp;(на&nbsp;будущее)&nbsp;---------<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;register_component(self,&nbsp;name:&nbsp;str,&nbsp;cls:&nbsp;type[&quot;Component&quot;]):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.components[name]&nbsp;=&nbsp;cls<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_component(self,&nbsp;name:&nbsp;str)&nbsp;-&gt;&nbsp;Optional[type[&quot;Component&quot;]]:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.components.get(name)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;list_component_names(self)&nbsp;-&gt;&nbsp;list[str]:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;sorted(self.components.keys())<br>
<!-- END SCAT CODE -->
</body>
</html>
