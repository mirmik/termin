<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>termin/visualization/animation/clip.py</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
#&nbsp;Animation&nbsp;clip&nbsp;helpers<br>
from&nbsp;__future__&nbsp;import&nbsp;annotations<br>
<br>
from&nbsp;._animation_native&nbsp;import&nbsp;TcAnimationClip<br>
from&nbsp;.channel&nbsp;import&nbsp;channel_data_from_fbx,&nbsp;channel_data_from_glb<br>
<br>
<br>
def&nbsp;clip_from_fbx(fbx_clip,&nbsp;uuid_hint:&nbsp;str&nbsp;=&nbsp;&quot;&quot;)&nbsp;-&gt;&nbsp;TcAnimationClip:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Create&nbsp;TcAnimationClip&nbsp;from&nbsp;FBXAnimationClip.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbx_clip:&nbsp;FBXAnimationClip&nbsp;from&nbsp;fbx_loader<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid_hint:&nbsp;Optional&nbsp;UUID&nbsp;for&nbsp;the&nbsp;clip<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TcAnimationClip<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;channels_data&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;ch&nbsp;in&nbsp;fbx_clip.channels:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channels_data.append(channel_data_from_fbx(ch))<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;clip&nbsp;=&nbsp;TcAnimationClip.create(fbx_clip.name,&nbsp;uuid_hint)<br>
&nbsp;&nbsp;&nbsp;&nbsp;clip.set_tps(fbx_clip.ticks_per_second&nbsp;or&nbsp;30.0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;clip.set_loop(True)<br>
&nbsp;&nbsp;&nbsp;&nbsp;clip.set_channels(channels_data)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;clip<br>
<br>
<br>
def&nbsp;clip_from_glb(glb_clip,&nbsp;uuid_hint:&nbsp;str&nbsp;=&nbsp;&quot;&quot;)&nbsp;-&gt;&nbsp;TcAnimationClip:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Create&nbsp;TcAnimationClip&nbsp;from&nbsp;GLBAnimationClip.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glb_clip:&nbsp;GLBAnimationClip&nbsp;from&nbsp;glb_loader<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid_hint:&nbsp;Optional&nbsp;UUID&nbsp;for&nbsp;the&nbsp;clip<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TcAnimationClip<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;channels_data&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;ch&nbsp;in&nbsp;glb_clip.channels:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channels_data.append(channel_data_from_glb(ch))<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;clip&nbsp;=&nbsp;TcAnimationClip.create(glb_clip.name,&nbsp;uuid_hint)<br>
&nbsp;&nbsp;&nbsp;&nbsp;clip.set_tps(1.0)&nbsp;&nbsp;#&nbsp;GLB&nbsp;uses&nbsp;seconds&nbsp;directly<br>
&nbsp;&nbsp;&nbsp;&nbsp;clip.set_loop(True)<br>
&nbsp;&nbsp;&nbsp;&nbsp;clip.set_channels(channels_data)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;clip<br>
<br>
<br>
__all__&nbsp;=&nbsp;[&quot;TcAnimationClip&quot;,&nbsp;&quot;clip_from_fbx&quot;,&nbsp;&quot;clip_from_glb&quot;]<br>
<!-- END SCAT CODE -->
</body>
</html>
