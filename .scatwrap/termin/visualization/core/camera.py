<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>termin/visualization/core/camera.py</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
&quot;&quot;&quot;<br>
Camera&nbsp;components&nbsp;and&nbsp;controllers.<br>
<br>
Coordinate&nbsp;convention:&nbsp;Y-forward,&nbsp;Z-up<br>
&nbsp;&nbsp;-&nbsp;X:&nbsp;right<br>
&nbsp;&nbsp;-&nbsp;Y:&nbsp;forward&nbsp;(depth,&nbsp;camera&nbsp;looks&nbsp;along&nbsp;+Y)<br>
&nbsp;&nbsp;-&nbsp;Z:&nbsp;up<br>
<br>
This&nbsp;differs&nbsp;from&nbsp;standard&nbsp;OpenGL&nbsp;(Z-forward,&nbsp;Y-up).<br>
Projection&nbsp;matrices&nbsp;are&nbsp;adapted&nbsp;accordingly.<br>
&quot;&quot;&quot;<br>
<br>
from&nbsp;__future__&nbsp;import&nbsp;annotations<br>
<br>
import&nbsp;math<br>
from&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Optional,&nbsp;TYPE_CHECKING<br>
<br>
if&nbsp;TYPE_CHECKING:<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;termin.visualization.core.viewport&nbsp;import&nbsp;Viewport<br>
<br>
import&nbsp;numpy&nbsp;as&nbsp;np<br>
<br>
from&nbsp;termin._native&nbsp;import&nbsp;log<br>
from&nbsp;termin.geombase&nbsp;import&nbsp;Pose3<br>
<br>
from&nbsp;termin.editor.inspect_field&nbsp;import&nbsp;inspect<br>
from&nbsp;termin.visualization.core.python_component&nbsp;import&nbsp;InputComponent<br>
from&nbsp;termin.visualization.core.input_events&nbsp;import&nbsp;MouseButtonEvent,&nbsp;MouseMoveEvent,&nbsp;ScrollEvent<br>
from&nbsp;termin.visualization.platform.backends.base&nbsp;import&nbsp;Action,&nbsp;MouseButton<br>
<br>
#&nbsp;Re-export&nbsp;from&nbsp;C++<br>
from&nbsp;termin.entity._entity_native&nbsp;import&nbsp;(<br>
&nbsp;&nbsp;&nbsp;&nbsp;CameraComponent,<br>
&nbsp;&nbsp;&nbsp;&nbsp;PerspectiveCameraComponent,<br>
&nbsp;&nbsp;&nbsp;&nbsp;OrthographicCameraComponent,<br>
&nbsp;&nbsp;&nbsp;&nbsp;OrbitCameraController,<br>
)<br>
<br>
__all__&nbsp;=&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;CameraComponent&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;PerspectiveCameraComponent&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;OrthographicCameraComponent&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;CameraController&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;OrbitCameraController&quot;,<br>
]<br>
<br>
<br>
class&nbsp;CameraController(InputComponent):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Base&nbsp;class&nbsp;for&nbsp;camera&nbsp;manipulation&nbsp;controllers.&quot;&quot;&quot;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;enabled:&nbsp;bool&nbsp;=&nbsp;True):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super().__init__(enabled)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.camera_component:&nbsp;CameraComponent&nbsp;|&nbsp;None&nbsp;=&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;on_added(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super().on_added()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.camera_component&nbsp;=&nbsp;self.entity.get_component(CameraComponent)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.camera_component&nbsp;is&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;RuntimeError(&quot;CameraController&nbsp;requires&nbsp;a&nbsp;CameraComponent&nbsp;on&nbsp;the&nbsp;same&nbsp;entity.&quot;)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;orbit(self,&nbsp;d_azimuth:&nbsp;float,&nbsp;d_elevation:&nbsp;float):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;pan(self,&nbsp;dx:&nbsp;float,&nbsp;dy:&nbsp;float):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;zoom(self,&nbsp;delta:&nbsp;float):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;center_on(self,&nbsp;position:&nbsp;np.ndarray)&nbsp;-&gt;&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Center&nbsp;camera&nbsp;on&nbsp;position.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br>
<!-- END SCAT CODE -->
</body>
</html>
