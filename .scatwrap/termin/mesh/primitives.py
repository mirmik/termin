<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>termin/mesh/primitives.py</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
&quot;&quot;&quot;Primitive&nbsp;mesh&nbsp;shapes:&nbsp;Cube,&nbsp;Sphere,&nbsp;Cylinder,&nbsp;Cone,&nbsp;Plane,&nbsp;Ring,&nbsp;Torus.&quot;&quot;&quot;<br>
<br>
import&nbsp;hashlib<br>
import&nbsp;numpy&nbsp;as&nbsp;np<br>
from&nbsp;._mesh_native&nbsp;import&nbsp;Mesh3<br>
<br>
<br>
def&nbsp;_primitive_uuid(name:&nbsp;str,&nbsp;*args)&nbsp;-&gt;&nbsp;str:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Compute&nbsp;UUID&nbsp;for&nbsp;primitive&nbsp;from&nbsp;name&nbsp;and&nbsp;parameters.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;f&quot;{name}:{':'.join(str(a)&nbsp;for&nbsp;a&nbsp;in&nbsp;args)}&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;hashlib.sha256(key.encode()).hexdigest()[:16]<br>
<br>
<br>
def&nbsp;CubeMesh(size:&nbsp;float&nbsp;=&nbsp;1.0,&nbsp;y:&nbsp;float&nbsp;=&nbsp;None,&nbsp;z:&nbsp;float&nbsp;=&nbsp;None)&nbsp;-&gt;&nbsp;Mesh3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Create&nbsp;a&nbsp;simple&nbsp;cube&nbsp;mesh.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;size<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;y&nbsp;is&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;x<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;z&nbsp;is&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;=&nbsp;x<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;_primitive_uuid(&quot;CubeMesh&quot;,&nbsp;x,&nbsp;y,&nbsp;z)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;s_x&nbsp;=&nbsp;x&nbsp;*&nbsp;0.5<br>
&nbsp;&nbsp;&nbsp;&nbsp;s_y&nbsp;=&nbsp;y&nbsp;*&nbsp;0.5<br>
&nbsp;&nbsp;&nbsp;&nbsp;s_z&nbsp;=&nbsp;z&nbsp;*&nbsp;0.5<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;=&nbsp;np.array(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-s_x,&nbsp;-s_y,&nbsp;-s_z],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[s_x,&nbsp;-s_y,&nbsp;-s_z],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[s_x,&nbsp;s_y,&nbsp;-s_z],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-s_x,&nbsp;s_y,&nbsp;-s_z],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-s_x,&nbsp;-s_y,&nbsp;s_z],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[s_x,&nbsp;-s_y,&nbsp;s_z],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[s_x,&nbsp;s_y,&nbsp;s_z],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-s_x,&nbsp;s_y,&nbsp;s_z],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtype=np.float32,<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;triangles&nbsp;=&nbsp;np.array(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1,&nbsp;0,&nbsp;2],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[2,&nbsp;0,&nbsp;3],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[4,&nbsp;5,&nbsp;7],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[5,&nbsp;6,&nbsp;7],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0,&nbsp;1,&nbsp;4],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1,&nbsp;5,&nbsp;4],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[2,&nbsp;3,&nbsp;6],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[3,&nbsp;7,&nbsp;6],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[3,&nbsp;0,&nbsp;4],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[7,&nbsp;3,&nbsp;4],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1,&nbsp;2,&nbsp;5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[2,&nbsp;6,&nbsp;5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtype=np.uint32,<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;uvs&nbsp;=&nbsp;np.array([<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.0,&nbsp;0.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1.0,&nbsp;0.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1.0,&nbsp;1.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.0,&nbsp;1.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.0,&nbsp;0.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1.0,&nbsp;0.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1.0,&nbsp;1.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.0,&nbsp;1.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;dtype=np.float32)<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh&nbsp;=&nbsp;Mesh3(vertices=vertices,&nbsp;triangles=triangles,&nbsp;uvs=uvs,&nbsp;name=&quot;Cube&quot;,&nbsp;uuid=uuid)<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_normals()<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_tangents()<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mesh<br>
<br>
<br>
def&nbsp;TexturedCubeMesh(size:&nbsp;float&nbsp;=&nbsp;1.0,&nbsp;y:&nbsp;float&nbsp;=&nbsp;None,&nbsp;z:&nbsp;float&nbsp;=&nbsp;None)&nbsp;-&gt;&nbsp;Mesh3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Create&nbsp;a&nbsp;textured&nbsp;cube&nbsp;mesh&nbsp;with&nbsp;proper&nbsp;UV&nbsp;mapping&nbsp;per&nbsp;face.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;size<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;y&nbsp;is&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;x<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;z&nbsp;is&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;=&nbsp;x<br>
&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;_primitive_uuid(&quot;TexturedCubeMesh&quot;,&nbsp;x,&nbsp;y,&nbsp;z)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;=&nbsp;np.array([<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;-0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;-0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;-0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;-0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;-0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;-0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;-0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;-0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;-0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;-0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;-0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;-0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;-0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;-0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;-0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;-0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;-0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;-0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;dtype=np.float32)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;uvs&nbsp;=&nbsp;np.array([<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;0.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;0.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;0.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;0.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;0.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;0.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[1.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;1.0],&nbsp;[0.0,&nbsp;0.0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;dtype=np.float32)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;triangles&nbsp;=&nbsp;np.array([<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1,&nbsp;0,&nbsp;2],&nbsp;[4,&nbsp;3,&nbsp;5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[6,&nbsp;7,&nbsp;8],&nbsp;[9,&nbsp;10,&nbsp;11],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[12,&nbsp;13,&nbsp;14],&nbsp;[15,&nbsp;16,&nbsp;17],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[19,&nbsp;18,&nbsp;20],&nbsp;[22,&nbsp;21,&nbsp;23],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[24,&nbsp;25,&nbsp;26],&nbsp;[27,&nbsp;28,&nbsp;29],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[31,&nbsp;30,&nbsp;32],&nbsp;[34,&nbsp;33,&nbsp;35],<br>
&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;dtype=np.uint32)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh&nbsp;=&nbsp;Mesh3(vertices=vertices,&nbsp;triangles=triangles,&nbsp;uvs=uvs,&nbsp;name=&quot;TexturedCube&quot;,&nbsp;uuid=uuid)<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_normals()<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_tangents()<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mesh<br>
<br>
<br>
def&nbsp;UVSphereMesh(radius:&nbsp;float&nbsp;=&nbsp;1.0,&nbsp;n_meridians:&nbsp;int&nbsp;=&nbsp;16,&nbsp;n_parallels:&nbsp;int&nbsp;=&nbsp;16)&nbsp;-&gt;&nbsp;Mesh3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Create&nbsp;a&nbsp;UV&nbsp;sphere&nbsp;mesh&nbsp;with&nbsp;UV&nbsp;coordinates.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;_primitive_uuid(&quot;UVSphereMesh&quot;,&nbsp;radius,&nbsp;n_meridians,&nbsp;n_parallels)<br>
&nbsp;&nbsp;&nbsp;&nbsp;rings&nbsp;=&nbsp;n_parallels<br>
&nbsp;&nbsp;&nbsp;&nbsp;segments&nbsp;=&nbsp;n_meridians<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;uvs&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;triangles&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;r&nbsp;in&nbsp;range(rings&nbsp;+&nbsp;1):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theta&nbsp;=&nbsp;r&nbsp;*&nbsp;np.pi&nbsp;/&nbsp;rings<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sin_theta&nbsp;=&nbsp;np.sin(theta)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cos_theta&nbsp;=&nbsp;np.cos(theta)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v_coord&nbsp;=&nbsp;r&nbsp;/&nbsp;rings<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;s&nbsp;in&nbsp;range(segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;phi&nbsp;=&nbsp;s&nbsp;*&nbsp;2&nbsp;*&nbsp;np.pi&nbsp;/&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;radius&nbsp;*&nbsp;sin_theta&nbsp;*&nbsp;np.cos(phi)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;radius&nbsp;*&nbsp;sin_theta&nbsp;*&nbsp;np.sin(phi)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;=&nbsp;radius&nbsp;*&nbsp;cos_theta<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices.append([x,&nbsp;y,&nbsp;z])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uvs.append([s&nbsp;/&nbsp;segments,&nbsp;v_coord])<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;r&nbsp;in&nbsp;range(rings):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;s&nbsp;in&nbsp;range(segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_r&nbsp;=&nbsp;r&nbsp;+&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_s&nbsp;=&nbsp;(s&nbsp;+&nbsp;1)&nbsp;%&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([r&nbsp;*&nbsp;segments&nbsp;+&nbsp;s,&nbsp;next_r&nbsp;*&nbsp;segments&nbsp;+&nbsp;s,&nbsp;next_r&nbsp;*&nbsp;segments&nbsp;+&nbsp;next_s])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([r&nbsp;*&nbsp;segments&nbsp;+&nbsp;s,&nbsp;next_r&nbsp;*&nbsp;segments&nbsp;+&nbsp;next_s,&nbsp;r&nbsp;*&nbsp;segments&nbsp;+&nbsp;next_s])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh&nbsp;=&nbsp;Mesh3(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices=np.array(vertices,&nbsp;dtype=np.float32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles=np.array(triangles,&nbsp;dtype=np.uint32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uvs=np.array(uvs,&nbsp;dtype=np.float32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=&quot;UVSphere&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid=uuid<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_normals()<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_tangents()<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mesh<br>
<br>
<br>
def&nbsp;IcoSphereMesh(radius:&nbsp;float&nbsp;=&nbsp;1.0,&nbsp;subdivisions:&nbsp;int&nbsp;=&nbsp;2)&nbsp;-&gt;&nbsp;Mesh3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Create&nbsp;an&nbsp;icosphere&nbsp;mesh.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;=&nbsp;(1.0&nbsp;+&nbsp;np.sqrt(5.0))&nbsp;/&nbsp;2.0<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;=&nbsp;np.array(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-1,&nbsp;t,&nbsp;0],&nbsp;[1,&nbsp;t,&nbsp;0],&nbsp;[-1,&nbsp;-t,&nbsp;0],&nbsp;[1,&nbsp;-t,&nbsp;0],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0,&nbsp;-1,&nbsp;t],&nbsp;[0,&nbsp;1,&nbsp;t],&nbsp;[0,&nbsp;-1,&nbsp;-t],&nbsp;[0,&nbsp;1,&nbsp;-t],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[t,&nbsp;0,&nbsp;-1],&nbsp;[t,&nbsp;0,&nbsp;1],&nbsp;[-t,&nbsp;0,&nbsp;-1],&nbsp;[-t,&nbsp;0,&nbsp;1],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtype=np.float32,<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;/=&nbsp;np.linalg.norm(vertices[0])<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;*=&nbsp;radius<br>
&nbsp;&nbsp;&nbsp;&nbsp;triangles&nbsp;=&nbsp;np.array(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0,&nbsp;11,&nbsp;5],&nbsp;[0,&nbsp;5,&nbsp;1],&nbsp;[0,&nbsp;1,&nbsp;7],&nbsp;[0,&nbsp;7,&nbsp;10],&nbsp;[0,&nbsp;10,&nbsp;11],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1,&nbsp;5,&nbsp;9],&nbsp;[5,&nbsp;11,&nbsp;4],&nbsp;[11,&nbsp;10,&nbsp;2],&nbsp;[10,&nbsp;7,&nbsp;6],&nbsp;[7,&nbsp;1,&nbsp;8],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[3,&nbsp;9,&nbsp;4],&nbsp;[3,&nbsp;4,&nbsp;2],&nbsp;[3,&nbsp;2,&nbsp;6],&nbsp;[3,&nbsp;6,&nbsp;8],&nbsp;[3,&nbsp;8,&nbsp;9],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[4,&nbsp;9,&nbsp;5],&nbsp;[2,&nbsp;4,&nbsp;11],&nbsp;[6,&nbsp;2,&nbsp;10],&nbsp;[8,&nbsp;6,&nbsp;7],&nbsp;[9,&nbsp;8,&nbsp;1],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtype=np.uint32,<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Subdivide<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;_&nbsp;in&nbsp;range(subdivisions):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices,&nbsp;triangles&nbsp;=&nbsp;_subdivide_icosphere(vertices,&nbsp;triangles,&nbsp;radius)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh&nbsp;=&nbsp;Mesh3(vertices=vertices,&nbsp;triangles=triangles,&nbsp;name=&quot;IcoSphere&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_normals()<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mesh<br>
<br>
<br>
def&nbsp;_subdivide_icosphere(vertices,&nbsp;triangles,&nbsp;radius):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Subdivide&nbsp;icosphere&nbsp;triangles.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;midpoint_cache&nbsp;=&nbsp;{}<br>
&nbsp;&nbsp;&nbsp;&nbsp;new_triangles&nbsp;=&nbsp;[]<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_midpoint(v1_idx,&nbsp;v2_idx):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nonlocal&nbsp;vertices<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;tuple(sorted((v1_idx,&nbsp;v2_idx)))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key&nbsp;in&nbsp;midpoint_cache:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;midpoint_cache[key]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;=&nbsp;vertices[v1_idx]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v2&nbsp;=&nbsp;vertices[v2_idx]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;midpoint&nbsp;=&nbsp;(v1&nbsp;+&nbsp;v2)&nbsp;/&nbsp;2.0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;midpoint&nbsp;=&nbsp;midpoint&nbsp;/&nbsp;np.linalg.norm(midpoint)&nbsp;*&nbsp;radius<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_idx&nbsp;=&nbsp;len(vertices)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;=&nbsp;np.vstack((vertices,&nbsp;midpoint))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;midpoint_cache[key]&nbsp;=&nbsp;new_idx<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new_idx<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;tri&nbsp;in&nbsp;triangles:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v0,&nbsp;v1,&nbsp;v2&nbsp;=&nbsp;tri<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;=&nbsp;get_midpoint(v0,&nbsp;v1)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b&nbsp;=&nbsp;get_midpoint(v1,&nbsp;v2)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;=&nbsp;get_midpoint(v2,&nbsp;v0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_triangles.append([v0,&nbsp;a,&nbsp;c])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_triangles.append([v1,&nbsp;b,&nbsp;a])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_triangles.append([v2,&nbsp;c,&nbsp;b])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_triangles.append([a,&nbsp;b,&nbsp;c])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;vertices.astype(np.float32),&nbsp;np.array(new_triangles,&nbsp;dtype=np.uint32)<br>
<br>
<br>
def&nbsp;PlaneMesh(width:&nbsp;float&nbsp;=&nbsp;1.0,&nbsp;depth:&nbsp;float&nbsp;=&nbsp;1.0,&nbsp;segments_w:&nbsp;int&nbsp;=&nbsp;1,&nbsp;segments_d:&nbsp;int&nbsp;=&nbsp;1)&nbsp;-&gt;&nbsp;Mesh3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Create&nbsp;a&nbsp;plane&nbsp;mesh&nbsp;in&nbsp;XZ&nbsp;plane&nbsp;with&nbsp;UV&nbsp;coordinates.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;_primitive_uuid(&quot;PlaneMesh&quot;,&nbsp;width,&nbsp;depth,&nbsp;segments_w,&nbsp;segments_d)<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;uvs&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;triangles&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;d&nbsp;in&nbsp;range(segments_d&nbsp;+&nbsp;1):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;=&nbsp;(d&nbsp;/&nbsp;segments_d&nbsp;-&nbsp;0.5)&nbsp;*&nbsp;depth<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v_coord&nbsp;=&nbsp;d&nbsp;/&nbsp;segments_d<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;w&nbsp;in&nbsp;range(segments_w&nbsp;+&nbsp;1):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;(w&nbsp;/&nbsp;segments_w&nbsp;-&nbsp;0.5)&nbsp;*&nbsp;width<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u_coord&nbsp;=&nbsp;w&nbsp;/&nbsp;segments_w<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices.append([x,&nbsp;0.0,&nbsp;z])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uvs.append([u_coord,&nbsp;v_coord])<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;d&nbsp;in&nbsp;range(segments_d):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;w&nbsp;in&nbsp;range(segments_w):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v0&nbsp;=&nbsp;d&nbsp;*&nbsp;(segments_w&nbsp;+&nbsp;1)&nbsp;+&nbsp;w<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;=&nbsp;v0&nbsp;+&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v2&nbsp;=&nbsp;v0&nbsp;+&nbsp;(segments_w&nbsp;+&nbsp;1)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v3&nbsp;=&nbsp;v2&nbsp;+&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([v0,&nbsp;v2,&nbsp;v1])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([v1,&nbsp;v2,&nbsp;v3])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh&nbsp;=&nbsp;Mesh3(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices=np.array(vertices,&nbsp;dtype=np.float32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles=np.array(triangles,&nbsp;dtype=np.uint32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uvs=np.array(uvs,&nbsp;dtype=np.float32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=&quot;Plane&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid=uuid<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_normals()<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_tangents()<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mesh<br>
<br>
<br>
def&nbsp;CylinderMesh(radius:&nbsp;float&nbsp;=&nbsp;1.0,&nbsp;height:&nbsp;float&nbsp;=&nbsp;1.0,&nbsp;segments:&nbsp;int&nbsp;=&nbsp;16)&nbsp;-&gt;&nbsp;Mesh3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Create&nbsp;a&nbsp;cylinder&nbsp;mesh.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;_primitive_uuid(&quot;CylinderMesh&quot;,&nbsp;radius,&nbsp;height,&nbsp;segments)<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;triangles&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;half_height&nbsp;=&nbsp;height&nbsp;*&nbsp;0.5<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;y_pos&nbsp;in&nbsp;[-half_height,&nbsp;half_height]:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;s&nbsp;in&nbsp;range(segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theta&nbsp;=&nbsp;s&nbsp;*&nbsp;2&nbsp;*&nbsp;np.pi&nbsp;/&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;radius&nbsp;*&nbsp;np.cos(theta)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;=&nbsp;radius&nbsp;*&nbsp;np.sin(theta)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices.append([x,&nbsp;y_pos,&nbsp;z])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;s&nbsp;in&nbsp;range(segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_s&nbsp;=&nbsp;(s&nbsp;+&nbsp;1)&nbsp;%&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bottom0&nbsp;=&nbsp;s<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bottom1&nbsp;=&nbsp;next_s<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top0&nbsp;=&nbsp;s&nbsp;+&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top1&nbsp;=&nbsp;next_s&nbsp;+&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([bottom0,&nbsp;top0,&nbsp;bottom1])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([bottom1,&nbsp;top0,&nbsp;top1])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Add&nbsp;center&nbsp;vertices&nbsp;for&nbsp;caps<br>
&nbsp;&nbsp;&nbsp;&nbsp;bottom_center_idx&nbsp;=&nbsp;len(vertices)<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices.append([0.0,&nbsp;-half_height,&nbsp;0.0])<br>
&nbsp;&nbsp;&nbsp;&nbsp;top_center_idx&nbsp;=&nbsp;len(vertices)<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices.append([0.0,&nbsp;half_height,&nbsp;0.0])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;s&nbsp;in&nbsp;range(segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_s&nbsp;=&nbsp;(s&nbsp;+&nbsp;1)&nbsp;%&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bottom0&nbsp;=&nbsp;s<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bottom1&nbsp;=&nbsp;next_s<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top0&nbsp;=&nbsp;s&nbsp;+&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top1&nbsp;=&nbsp;next_s&nbsp;+&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([bottom1,&nbsp;bottom_center_idx,&nbsp;bottom0])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([top0,&nbsp;top_center_idx,&nbsp;top1])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh&nbsp;=&nbsp;Mesh3(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices=np.array(vertices,&nbsp;dtype=np.float32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles=np.array(triangles,&nbsp;dtype=np.uint32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=&quot;Cylinder&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid=uuid<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_normals()<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mesh<br>
<br>
<br>
def&nbsp;ConeMesh(radius:&nbsp;float&nbsp;=&nbsp;1.0,&nbsp;height:&nbsp;float&nbsp;=&nbsp;1.0,&nbsp;segments:&nbsp;int&nbsp;=&nbsp;16)&nbsp;-&gt;&nbsp;Mesh3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Create&nbsp;a&nbsp;cone&nbsp;mesh.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;_primitive_uuid(&quot;ConeMesh&quot;,&nbsp;radius,&nbsp;height,&nbsp;segments)<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;triangles&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;half_height&nbsp;=&nbsp;height&nbsp;*&nbsp;0.5<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Apex<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices.append([0.0,&nbsp;half_height,&nbsp;0.0])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Base&nbsp;vertices<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;s&nbsp;in&nbsp;range(segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theta&nbsp;=&nbsp;s&nbsp;*&nbsp;2&nbsp;*&nbsp;np.pi&nbsp;/&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;radius&nbsp;*&nbsp;np.cos(theta)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;=&nbsp;radius&nbsp;*&nbsp;np.sin(theta)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices.append([x,&nbsp;-half_height,&nbsp;z])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Side&nbsp;triangles<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;s&nbsp;in&nbsp;range(segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_s&nbsp;=&nbsp;(s&nbsp;+&nbsp;1)&nbsp;%&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base0&nbsp;=&nbsp;s&nbsp;+&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base1&nbsp;=&nbsp;next_s&nbsp;+&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([0,&nbsp;base1,&nbsp;base0])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([base0,&nbsp;base1,&nbsp;len(vertices)])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Base&nbsp;center<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices.append([0.0,&nbsp;-half_height,&nbsp;0.0])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh&nbsp;=&nbsp;Mesh3(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices=np.array(vertices,&nbsp;dtype=np.float32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles=np.array(triangles,&nbsp;dtype=np.uint32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=&quot;Cone&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid=uuid<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_normals()<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mesh<br>
<br>
<br>
def&nbsp;TorusMesh(<br>
&nbsp;&nbsp;&nbsp;&nbsp;major_radius:&nbsp;float&nbsp;=&nbsp;1.0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;minor_radius:&nbsp;float&nbsp;=&nbsp;0.25,<br>
&nbsp;&nbsp;&nbsp;&nbsp;major_segments:&nbsp;int&nbsp;=&nbsp;32,<br>
&nbsp;&nbsp;&nbsp;&nbsp;minor_segments:&nbsp;int&nbsp;=&nbsp;16,<br>
)&nbsp;-&gt;&nbsp;Mesh3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Create&nbsp;a&nbsp;torus&nbsp;mesh&nbsp;in&nbsp;XZ&nbsp;plane&nbsp;with&nbsp;UV&nbsp;coordinates.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;major_segments&nbsp;&lt;&nbsp;3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;ValueError(&quot;TorusMesh:&nbsp;major_segments&nbsp;must&nbsp;be&nbsp;&gt;=&nbsp;3&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;minor_segments&nbsp;&lt;&nbsp;3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;ValueError(&quot;TorusMesh:&nbsp;minor_segments&nbsp;must&nbsp;be&nbsp;&gt;=&nbsp;3&quot;)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;_primitive_uuid(&quot;TorusMesh&quot;,&nbsp;major_radius,&nbsp;minor_radius,&nbsp;major_segments,&nbsp;minor_segments)<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;uvs&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;triangles&nbsp;=&nbsp;[]<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;range(major_segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u&nbsp;=&nbsp;2.0&nbsp;*&nbsp;np.pi&nbsp;*&nbsp;i&nbsp;/&nbsp;major_segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u_coord&nbsp;=&nbsp;i&nbsp;/&nbsp;major_segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cos_u&nbsp;=&nbsp;np.cos(u)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sin_u&nbsp;=&nbsp;np.sin(u)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;in&nbsp;range(minor_segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;=&nbsp;2.0&nbsp;*&nbsp;np.pi&nbsp;*&nbsp;j&nbsp;/&nbsp;minor_segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v_coord&nbsp;=&nbsp;j&nbsp;/&nbsp;minor_segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cos_v&nbsp;=&nbsp;np.cos(v)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sin_v&nbsp;=&nbsp;np.sin(v)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;(major_radius&nbsp;+&nbsp;minor_radius&nbsp;*&nbsp;cos_v)&nbsp;*&nbsp;cos_u<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;minor_radius&nbsp;*&nbsp;sin_v<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;=&nbsp;(major_radius&nbsp;+&nbsp;minor_radius&nbsp;*&nbsp;cos_v)&nbsp;*&nbsp;sin_u<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices.append([x,&nbsp;y,&nbsp;z])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uvs.append([u_coord,&nbsp;v_coord])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;range(major_segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_i&nbsp;=&nbsp;(i&nbsp;+&nbsp;1)&nbsp;%&nbsp;major_segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;in&nbsp;range(minor_segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_j&nbsp;=&nbsp;(j&nbsp;+&nbsp;1)&nbsp;%&nbsp;minor_segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v0&nbsp;=&nbsp;i&nbsp;*&nbsp;minor_segments&nbsp;+&nbsp;j<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;=&nbsp;next_i&nbsp;*&nbsp;minor_segments&nbsp;+&nbsp;j<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v2&nbsp;=&nbsp;next_i&nbsp;*&nbsp;minor_segments&nbsp;+&nbsp;next_j<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v3&nbsp;=&nbsp;i&nbsp;*&nbsp;minor_segments&nbsp;+&nbsp;next_j<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([v0,&nbsp;v1,&nbsp;v2])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([v0,&nbsp;v2,&nbsp;v3])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh&nbsp;=&nbsp;Mesh3(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices=np.array(vertices,&nbsp;dtype=np.float32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles=np.array(triangles,&nbsp;dtype=np.uint32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uvs=np.array(uvs,&nbsp;dtype=np.float32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=&quot;Torus&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid=uuid<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_normals()<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_tangents()<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mesh<br>
<br>
<br>
def&nbsp;RingMesh(<br>
&nbsp;&nbsp;&nbsp;&nbsp;radius:&nbsp;float&nbsp;=&nbsp;1.0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;thickness:&nbsp;float&nbsp;=&nbsp;0.05,<br>
&nbsp;&nbsp;&nbsp;&nbsp;segments:&nbsp;int&nbsp;=&nbsp;32,<br>
)&nbsp;-&gt;&nbsp;Mesh3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Create&nbsp;a&nbsp;flat&nbsp;ring&nbsp;(annulus)&nbsp;in&nbsp;XZ&nbsp;plane.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;segments&nbsp;&lt;&nbsp;3:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;ValueError(&quot;RingMesh:&nbsp;segments&nbsp;must&nbsp;be&nbsp;&gt;=&nbsp;3&quot;)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;uuid&nbsp;=&nbsp;_primitive_uuid(&quot;RingMesh&quot;,&nbsp;radius,&nbsp;thickness,&nbsp;segments)<br>
&nbsp;&nbsp;&nbsp;&nbsp;inner_radius&nbsp;=&nbsp;max(radius&nbsp;-&nbsp;thickness&nbsp;*&nbsp;0.5,&nbsp;1e-4)<br>
&nbsp;&nbsp;&nbsp;&nbsp;outer_radius&nbsp;=&nbsp;radius&nbsp;+&nbsp;thickness&nbsp;*&nbsp;0.5<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;vertices&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;triangles&nbsp;=&nbsp;[]<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;range(segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;angle&nbsp;=&nbsp;2.0&nbsp;*&nbsp;np.pi&nbsp;*&nbsp;i&nbsp;/&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;=&nbsp;np.cos(angle)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s&nbsp;=&nbsp;np.sin(angle)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices.append([inner_radius&nbsp;*&nbsp;c,&nbsp;0.0,&nbsp;inner_radius&nbsp;*&nbsp;s])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices.append([outer_radius&nbsp;*&nbsp;c,&nbsp;0.0,&nbsp;outer_radius&nbsp;*&nbsp;s])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;range(segments):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i_inner&nbsp;=&nbsp;2&nbsp;*&nbsp;i<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i_outer&nbsp;=&nbsp;2&nbsp;*&nbsp;i&nbsp;+&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next_i&nbsp;=&nbsp;(i&nbsp;+&nbsp;1)&nbsp;%&nbsp;segments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n_inner&nbsp;=&nbsp;2&nbsp;*&nbsp;next_i<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n_outer&nbsp;=&nbsp;2&nbsp;*&nbsp;next_i&nbsp;+&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([i_inner,&nbsp;n_inner,&nbsp;i_outer])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles.append([i_outer,&nbsp;n_inner,&nbsp;n_outer])<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh&nbsp;=&nbsp;Mesh3(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertices=np.array(vertices,&nbsp;dtype=np.float32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangles=np.array(triangles,&nbsp;dtype=np.uint32),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=&quot;Ring&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uuid=uuid<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;mesh.compute_normals()<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mesh<br>
<!-- END SCAT CODE -->
</body>
</html>
