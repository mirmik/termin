<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>termin/log.py</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
&quot;&quot;&quot;<br>
termin.log&nbsp;-&nbsp;Logging&nbsp;module&nbsp;with&nbsp;proper&nbsp;Python&nbsp;exception&nbsp;handling.<br>
<br>
Usage:<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;termin&nbsp;import&nbsp;log<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;Hello&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;log.warn(&quot;Something&nbsp;wrong&quot;)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;try:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_something()<br>
&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.error(e,&nbsp;&quot;Failed&nbsp;to&nbsp;do&nbsp;something&quot;)&nbsp;&nbsp;#&nbsp;includes&nbsp;traceback<br>
&quot;&quot;&quot;<br>
<br>
import&nbsp;traceback<br>
from&nbsp;termin._native&nbsp;import&nbsp;log&nbsp;as&nbsp;_native_log<br>
<br>
<br>
def&nbsp;debug(msg_or_exc,&nbsp;context:&nbsp;str&nbsp;=&nbsp;&quot;&quot;):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Log&nbsp;debug&nbsp;message&nbsp;or&nbsp;exception&nbsp;with&nbsp;context.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(msg_or_exc,&nbsp;BaseException):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_log_exception(_native_log.debug,&nbsp;msg_or_exc,&nbsp;context)<br>
&nbsp;&nbsp;&nbsp;&nbsp;else:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_native_log.debug(str(msg_or_exc))<br>
<br>
<br>
def&nbsp;info(msg_or_exc,&nbsp;context:&nbsp;str&nbsp;=&nbsp;&quot;&quot;):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Log&nbsp;info&nbsp;message&nbsp;or&nbsp;exception&nbsp;with&nbsp;context.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(msg_or_exc,&nbsp;BaseException):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_log_exception(_native_log.info,&nbsp;msg_or_exc,&nbsp;context)<br>
&nbsp;&nbsp;&nbsp;&nbsp;else:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_native_log.info(str(msg_or_exc))<br>
<br>
<br>
def&nbsp;warn(msg_or_exc,&nbsp;context:&nbsp;str&nbsp;=&nbsp;&quot;&quot;):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Log&nbsp;warning&nbsp;message&nbsp;or&nbsp;exception&nbsp;with&nbsp;context.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(msg_or_exc,&nbsp;BaseException):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_log_exception(_native_log.warn,&nbsp;msg_or_exc,&nbsp;context)<br>
&nbsp;&nbsp;&nbsp;&nbsp;else:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_native_log.warn(str(msg_or_exc))<br>
<br>
<br>
def&nbsp;warning(msg_or_exc,&nbsp;context:&nbsp;str&nbsp;=&nbsp;&quot;&quot;):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Alias&nbsp;for&nbsp;warn().&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;warn(msg_or_exc,&nbsp;context)<br>
<br>
<br>
def&nbsp;error(msg_or_exc,&nbsp;context:&nbsp;str&nbsp;=&nbsp;&quot;&quot;):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Log&nbsp;error&nbsp;message&nbsp;or&nbsp;exception&nbsp;with&nbsp;context.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(msg_or_exc,&nbsp;BaseException):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_log_exception(_native_log.error,&nbsp;msg_or_exc,&nbsp;context)<br>
&nbsp;&nbsp;&nbsp;&nbsp;else:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_native_log.error(str(msg_or_exc))<br>
<br>
<br>
def&nbsp;exception(msg:&nbsp;str&nbsp;=&nbsp;&quot;&quot;):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Log&nbsp;error&nbsp;with&nbsp;current&nbsp;exception&nbsp;traceback.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;_native_log.exception(msg)<br>
<br>
<br>
def&nbsp;_log_exception(log_func,&nbsp;exc:&nbsp;BaseException,&nbsp;context:&nbsp;str):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Format&nbsp;and&nbsp;log&nbsp;exception&nbsp;with&nbsp;traceback.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;exc_type&nbsp;=&nbsp;type(exc).__name__<br>
&nbsp;&nbsp;&nbsp;&nbsp;exc_msg&nbsp;=&nbsp;str(exc)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Get&nbsp;traceback&nbsp;if&nbsp;available<br>
&nbsp;&nbsp;&nbsp;&nbsp;tb&nbsp;=&nbsp;&quot;&quot;.join(traceback.format_exception(type(exc),&nbsp;exc,&nbsp;exc.__traceback__))<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_msg&nbsp;=&nbsp;f&quot;{context}:&nbsp;{exc_type}:&nbsp;{exc_msg}\n{tb}&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;else:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_msg&nbsp;=&nbsp;f&quot;{exc_type}:&nbsp;{exc_msg}\n{tb}&quot;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;log_func(full_msg)<br>
<br>
<br>
#&nbsp;Re-export&nbsp;configuration&nbsp;functions<br>
set_level&nbsp;=&nbsp;_native_log.set_level<br>
set_callback&nbsp;=&nbsp;_native_log.set_callback<br>
Level&nbsp;=&nbsp;_native_log.Level<br>
<!-- END SCAT CODE -->
</body>
</html>
