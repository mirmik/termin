<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>termin/editor/settings.py</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
&quot;&quot;&quot;<br>
Настройки&nbsp;редактора.<br>
<br>
Централизованное&nbsp;хранение&nbsp;и&nbsp;загрузка&nbsp;настроек&nbsp;между&nbsp;сессиями.<br>
Использует&nbsp;QSettings&nbsp;для&nbsp;кроссплатформенного&nbsp;хранения.<br>
&quot;&quot;&quot;<br>
<br>
from&nbsp;__future__&nbsp;import&nbsp;annotations<br>
<br>
from&nbsp;pathlib&nbsp;import&nbsp;Path<br>
from&nbsp;typing&nbsp;import&nbsp;Any<br>
<br>
from&nbsp;PyQt6.QtCore&nbsp;import&nbsp;QSettings<br>
<br>
<br>
class&nbsp;EditorSettings:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Менеджер&nbsp;настроек&nbsp;редактора.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Singleton-класс&nbsp;для&nbsp;доступа&nbsp;к&nbsp;настройкам&nbsp;из&nbsp;любого&nbsp;места.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Настройки&nbsp;хранятся&nbsp;в:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Windows:&nbsp;реестр&nbsp;HKEY_CURRENT_USER\\Software\\Termin\\TerminEditor<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Linux:&nbsp;~/.config/Termin/TerminEditor.conf<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;macOS:&nbsp;~/Library/Preferences/com.termin.TerminEditor.plist<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;_instance:&nbsp;&quot;EditorSettings&nbsp;|&nbsp;None&quot;&nbsp;=&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Ключи&nbsp;настроек<br>
&nbsp;&nbsp;&nbsp;&nbsp;KEY_LAST_PROJECT_PATH&nbsp;=&nbsp;&quot;ProjectBrowser/lastProjectPath&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;KEY_LAST_SCENE_PATH&nbsp;=&nbsp;&quot;Editor/lastScenePath&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;KEY_WINDOW_GEOMETRY&nbsp;=&nbsp;&quot;Editor/windowGeometry&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;KEY_WINDOW_STATE&nbsp;=&nbsp;&quot;Editor/windowState&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;KEY_SPLITTER_SIZES&nbsp;=&nbsp;&quot;Editor/splitterSizes&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;KEY_TEXT_EDITOR&nbsp;=&nbsp;&quot;Editor/textEditor&quot;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._settings&nbsp;=&nbsp;QSettings(&quot;Termin&quot;,&nbsp;&quot;TerminEditor&quot;)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;@classmethod<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;instance(cls)&nbsp;-&gt;&nbsp;&quot;EditorSettings&quot;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Получить&nbsp;singleton&nbsp;экземпляр.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;cls._instance&nbsp;is&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cls._instance&nbsp;=&nbsp;cls()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;cls._instance<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get(self,&nbsp;key:&nbsp;str,&nbsp;default:&nbsp;Any&nbsp;=&nbsp;None)&nbsp;-&gt;&nbsp;Any:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Получить&nbsp;значение&nbsp;настройки.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self._settings.value(key,&nbsp;default)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;set(self,&nbsp;key:&nbsp;str,&nbsp;value:&nbsp;Any)&nbsp;-&gt;&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Установить&nbsp;значение&nbsp;настройки.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._settings.setValue(key,&nbsp;value)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;sync(self)&nbsp;-&gt;&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Принудительно&nbsp;сохранить&nbsp;настройки&nbsp;на&nbsp;диск.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._settings.sync()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;---&nbsp;Удобные&nbsp;методы&nbsp;для&nbsp;частых&nbsp;настроек&nbsp;---<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_last_project_file(self)&nbsp;-&gt;&nbsp;Path&nbsp;|&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Получить&nbsp;путь&nbsp;к&nbsp;файлу&nbsp;последнего&nbsp;открытого&nbsp;проекта&nbsp;(.terminproj).&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path_str&nbsp;=&nbsp;self.get(self.KEY_LAST_PROJECT_PATH)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;path_str:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;=&nbsp;Path(path_str)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;path.exists()&nbsp;and&nbsp;path.is_file()&nbsp;and&nbsp;path.suffix&nbsp;==&nbsp;&quot;.terminproj&quot;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;path<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;set_last_project_file(self,&nbsp;path:&nbsp;Path&nbsp;|&nbsp;str)&nbsp;-&gt;&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Сохранить&nbsp;путь&nbsp;к&nbsp;файлу&nbsp;проекта.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.set(self.KEY_LAST_PROJECT_PATH,&nbsp;str(path))<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_last_scene_path(self)&nbsp;-&gt;&nbsp;Path&nbsp;|&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Получить&nbsp;путь&nbsp;последней&nbsp;открытой&nbsp;сцены.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path_str&nbsp;=&nbsp;self.get(self.KEY_LAST_SCENE_PATH)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;path_str:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;=&nbsp;Path(path_str)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;path.exists():<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;path<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;set_last_scene_path(self,&nbsp;path:&nbsp;Path&nbsp;|&nbsp;str)&nbsp;-&gt;&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Сохранить&nbsp;путь&nbsp;сцены.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.set(self.KEY_LAST_SCENE_PATH,&nbsp;str(path))<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_window_geometry(self)&nbsp;-&gt;&nbsp;bytes&nbsp;|&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Получить&nbsp;геометрию&nbsp;окна.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.get(self.KEY_WINDOW_GEOMETRY)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;set_window_geometry(self,&nbsp;geometry:&nbsp;bytes)&nbsp;-&gt;&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Сохранить&nbsp;геометрию&nbsp;окна.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.set(self.KEY_WINDOW_GEOMETRY,&nbsp;geometry)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_window_state(self)&nbsp;-&gt;&nbsp;bytes&nbsp;|&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Получить&nbsp;состояние&nbsp;окна.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.get(self.KEY_WINDOW_STATE)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;set_window_state(self,&nbsp;state:&nbsp;bytes)&nbsp;-&gt;&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Сохранить&nbsp;состояние&nbsp;окна.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.set(self.KEY_WINDOW_STATE,&nbsp;state)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_text_editor(self)&nbsp;-&gt;&nbsp;str&nbsp;|&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Получить&nbsp;путь&nbsp;к&nbsp;внешнему&nbsp;текстовому&nbsp;редактору.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.get(self.KEY_TEXT_EDITOR)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;init_text_editor_if_empty(self)&nbsp;-&gt;&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Инициализирует&nbsp;настройку&nbsp;текстового&nbsp;редактора,&nbsp;если&nbsp;она&nbsp;не&nbsp;задана.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Вызывается&nbsp;при&nbsp;старте&nbsp;редактора.&nbsp;Ищет&nbsp;VS&nbsp;Code&nbsp;в&nbsp;стандартных&nbsp;путях<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;и&nbsp;сохраняет&nbsp;найденный&nbsp;путь&nbsp;в&nbsp;настройки.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;editor&nbsp;=&nbsp;self.get(self.KEY_TEXT_EDITOR)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;editor:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Пытаемся&nbsp;найти&nbsp;VS&nbsp;Code&nbsp;по&nbsp;умолчанию<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;detected&nbsp;=&nbsp;self._detect_vscode()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;detected:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.set_text_editor(detected)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.sync()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;_detect_vscode(self)&nbsp;-&gt;&nbsp;str&nbsp;|&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ищет&nbsp;VS&nbsp;Code&nbsp;в&nbsp;стандартных&nbsp;путях&nbsp;установки.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Путь&nbsp;к&nbsp;исполняемому&nbsp;файлу&nbsp;VS&nbsp;Code&nbsp;или&nbsp;None.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;platform<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;os<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;system&nbsp;=&nbsp;platform.system()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;system&nbsp;==&nbsp;&quot;Windows&quot;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Windows:&nbsp;проверяем&nbsp;стандартные&nbsp;пути&nbsp;установки&nbsp;VS&nbsp;Code<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;candidates&nbsp;=&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;User&nbsp;installation<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path(os.environ.get(&quot;LOCALAPPDATA&quot;,&nbsp;&quot;&quot;))&nbsp;/&nbsp;&quot;Programs&quot;&nbsp;/&nbsp;&quot;Microsoft&nbsp;VS&nbsp;Code&quot;&nbsp;/&nbsp;&quot;Code.exe&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;System&nbsp;installation<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path(os.environ.get(&quot;PROGRAMFILES&quot;,&nbsp;&quot;&quot;))&nbsp;/&nbsp;&quot;Microsoft&nbsp;VS&nbsp;Code&quot;&nbsp;/&nbsp;&quot;Code.exe&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path(os.environ.get(&quot;PROGRAMFILES(X86)&quot;,&nbsp;&quot;&quot;))&nbsp;/&nbsp;&quot;Microsoft&nbsp;VS&nbsp;Code&quot;&nbsp;/&nbsp;&quot;Code.exe&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;system&nbsp;==&nbsp;&quot;Darwin&quot;:&nbsp;&nbsp;#&nbsp;macOS<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;candidates&nbsp;=&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path(&quot;/Applications/Visual&nbsp;Studio&nbsp;Code.app/Contents/Resources/app/bin/code&quot;),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path.home()&nbsp;/&nbsp;&quot;Applications&quot;&nbsp;/&nbsp;&quot;Visual&nbsp;Studio&nbsp;Code.app&quot;&nbsp;/&nbsp;&quot;Contents&quot;&nbsp;/&nbsp;&quot;Resources&quot;&nbsp;/&nbsp;&quot;app&quot;&nbsp;/&nbsp;&quot;bin&quot;&nbsp;/&nbsp;&quot;code&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&nbsp;&nbsp;#&nbsp;Linux<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;candidates&nbsp;=&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path(&quot;/usr/bin/code&quot;),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path(&quot;/usr/local/bin/code&quot;),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path(&quot;/snap/bin/code&quot;),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path.home()&nbsp;/&nbsp;&quot;.local&quot;&nbsp;/&nbsp;&quot;bin&quot;&nbsp;/&nbsp;&quot;code&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;path&nbsp;in&nbsp;candidates:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;path.exists():<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;str(path)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;set_text_editor(self,&nbsp;editor_path:&nbsp;str&nbsp;|&nbsp;None)&nbsp;-&gt;&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Сохранить&nbsp;путь&nbsp;к&nbsp;текстовому&nbsp;редактору.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;editor_path:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.set(self.KEY_TEXT_EDITOR,&nbsp;editor_path)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._settings.remove(self.KEY_TEXT_EDITOR)<br>
<!-- END SCAT CODE -->
</body>
</html>
