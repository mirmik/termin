<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>termin/navmesh/__init__.py</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
&quot;&quot;&quot;<br>
NavMesh&nbsp;generation&nbsp;from&nbsp;voxel&nbsp;grids.<br>
<br>
Алгоритм:<br>
1.&nbsp;Берём&nbsp;поверхностные&nbsp;воксели&nbsp;с&nbsp;нормалями<br>
2.&nbsp;Region&nbsp;Growing&nbsp;—&nbsp;группируем&nbsp;связные&nbsp;воксели&nbsp;с&nbsp;похожими&nbsp;нормалями<br>
3.&nbsp;Для&nbsp;каждой&nbsp;группы&nbsp;строим&nbsp;контур&nbsp;(полигон)<br>
4.&nbsp;Триангулируем&nbsp;полигоны<br>
&quot;&quot;&quot;<br>
<br>
from&nbsp;termin.navmesh.types&nbsp;import&nbsp;NavPolygon,&nbsp;NavMesh,&nbsp;NavMeshConfig<br>
from&nbsp;termin.navmesh.polygon_builder&nbsp;import&nbsp;PolygonBuilder<br>
from&nbsp;termin.navmesh.persistence&nbsp;import&nbsp;NavMeshPersistence<br>
from&nbsp;termin.navmesh.display_component&nbsp;import&nbsp;NavMeshDisplayComponent<br>
from&nbsp;termin.navmesh.material_component&nbsp;import&nbsp;NavMeshMaterialComponent<br>
from&nbsp;termin.navmesh.pathfinding&nbsp;import&nbsp;RegionGraph,&nbsp;NavMeshGraph,&nbsp;Portal<br>
from&nbsp;termin.navmesh.pathfinding_world_component&nbsp;import&nbsp;PathfindingWorldComponent<br>
from&nbsp;termin.navmesh.agent_component&nbsp;import&nbsp;NavMeshAgentComponent<br>
from&nbsp;termin.navmesh.settings&nbsp;import&nbsp;AgentType,&nbsp;NavigationSettings,&nbsp;NavigationSettingsManager<br>
from&nbsp;termin.navmesh.builder_component&nbsp;import&nbsp;NavMeshBuilderComponent<br>
from&nbsp;termin.navmesh.registry&nbsp;import&nbsp;NavMeshRegistry<br>
<br>
#&nbsp;Optional&nbsp;C++&nbsp;components&nbsp;(require&nbsp;_navmesh_native&nbsp;to&nbsp;be&nbsp;built)<br>
try:<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;termin.navmesh._navmesh_native&nbsp;import&nbsp;RecastNavMeshBuilderComponent&nbsp;as&nbsp;_RecastNavMeshBuilderComponent<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;termin.navmesh._navmesh_native&nbsp;import&nbsp;RecastBuildResult<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Extend&nbsp;C++&nbsp;component&nbsp;with&nbsp;auto-loading&nbsp;of&nbsp;agent&nbsp;type&nbsp;parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;RecastNavMeshBuilderComponent(_RecastNavMeshBuilderComponent):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C++&nbsp;NavMesh&nbsp;builder&nbsp;component&nbsp;using&nbsp;Recast&nbsp;library.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extends&nbsp;the&nbsp;native&nbsp;component&nbsp;with&nbsp;automatic&nbsp;agent&nbsp;type&nbsp;parameter&nbsp;loading.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set&nbsp;agent_type_name&nbsp;to&nbsp;select&nbsp;agent&nbsp;type&nbsp;from&nbsp;Navigation&nbsp;Settings.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;build_from_entity(self)&nbsp;-&gt;&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Build&nbsp;NavMesh&nbsp;from&nbsp;entity,&nbsp;auto-loading&nbsp;agent&nbsp;type&nbsp;parameters.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manager&nbsp;=&nbsp;NavigationSettingsManager.instance()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;agent&nbsp;=&nbsp;manager.settings.get_agent_type(self.agent_type_name)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;agent&nbsp;is&nbsp;not&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.apply_agent_type(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;agent.height,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;agent.radius,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;agent.step_height,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;agent.max_slope<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super().build_from_entity()<br>
<br>
except&nbsp;ImportError:<br>
&nbsp;&nbsp;&nbsp;&nbsp;RecastNavMeshBuilderComponent&nbsp;=&nbsp;None<br>
&nbsp;&nbsp;&nbsp;&nbsp;RecastBuildResult&nbsp;=&nbsp;None<br>
<br>
__all__&nbsp;=&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavPolygon&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavMesh&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavMeshConfig&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;PolygonBuilder&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavMeshPersistence&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavMeshDisplayComponent&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavMeshMaterialComponent&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;RegionGraph&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavMeshGraph&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;Portal&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;PathfindingWorldComponent&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavMeshAgentComponent&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;AgentType&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavigationSettings&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavigationSettingsManager&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavMeshBuilderComponent&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;NavMeshRegistry&quot;,<br>
]<br>
<br>
#&nbsp;Add&nbsp;C++&nbsp;components&nbsp;to&nbsp;__all__&nbsp;only&nbsp;if&nbsp;available<br>
if&nbsp;RecastNavMeshBuilderComponent&nbsp;is&nbsp;not&nbsp;None:<br>
&nbsp;&nbsp;&nbsp;&nbsp;__all__.extend([&quot;RecastNavMeshBuilderComponent&quot;,&nbsp;&quot;RecastBuildResult&quot;])<br>
<!-- END SCAT CODE -->
</body>
</html>
