<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>termin/tween/ease.py</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
&quot;&quot;&quot;Функции&nbsp;сглаживания&nbsp;(easing)&nbsp;для&nbsp;твининга.<br>
<br>
Функции&nbsp;сглаживания&nbsp;определяют,&nbsp;как&nbsp;значение&nbsp;изменяется&nbsp;от&nbsp;начального&nbsp;к&nbsp;конечному.<br>
Все&nbsp;функции&nbsp;принимают&nbsp;t&nbsp;в&nbsp;диапазоне&nbsp;[0,&nbsp;1]&nbsp;и&nbsp;возвращают&nbsp;значение&nbsp;в&nbsp;том&nbsp;же&nbsp;диапазоне<br>
(за&nbsp;исключением&nbsp;Back&nbsp;и&nbsp;Elastic,&nbsp;которые&nbsp;могут&nbsp;выходить&nbsp;за&nbsp;пределы).<br>
<br>
Терминология:<br>
-&nbsp;IN&nbsp;(вход):&nbsp;медленное&nbsp;начало,&nbsp;ускорение&nbsp;к&nbsp;концу<br>
-&nbsp;OUT&nbsp;(выход):&nbsp;быстрое&nbsp;начало,&nbsp;замедление&nbsp;к&nbsp;концу<br>
-&nbsp;IN_OUT:&nbsp;медленное&nbsp;начало&nbsp;и&nbsp;конец,&nbsp;быстрая&nbsp;середина<br>
&quot;&quot;&quot;<br>
<br>
from&nbsp;__future__&nbsp;import&nbsp;annotations<br>
<br>
import&nbsp;math<br>
from&nbsp;enum&nbsp;import&nbsp;Enum,&nbsp;auto<br>
from&nbsp;typing&nbsp;import&nbsp;Callable<br>
<br>
<br>
class&nbsp;Ease(Enum):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Типы&nbsp;функций&nbsp;сглаживания.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Степенные&nbsp;функции&nbsp;(чем&nbsp;выше&nbsp;степень,&nbsp;тем&nbsp;резче&nbsp;переход):<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;QUAD:&nbsp;квадратичная&nbsp;(t²)&nbsp;—&nbsp;мягкое&nbsp;сглаживание<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;CUBIC:&nbsp;кубическая&nbsp;(t³)&nbsp;—&nbsp;умеренное&nbsp;сглаживание<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;QUART:&nbsp;четвёртая&nbsp;степень&nbsp;(t⁴)&nbsp;—&nbsp;заметное&nbsp;сглаживание<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;QUINT:&nbsp;пятая&nbsp;степень&nbsp;(t⁵)&nbsp;—&nbsp;сильное&nbsp;сглаживание<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Тригонометрические:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;SINE:&nbsp;синусоидальная&nbsp;—&nbsp;самое&nbsp;мягкое,&nbsp;естественное&nbsp;сглаживание<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Экспоненциальные:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;EXPO:&nbsp;экспоненциальная&nbsp;—&nbsp;очень&nbsp;резкий&nbsp;переход<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;CIRC:&nbsp;круговая&nbsp;(по&nbsp;дуге&nbsp;окружности)&nbsp;—&nbsp;резкий,&nbsp;но&nbsp;плавный<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Специальные&nbsp;эффекты:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;BACK:&nbsp;отскок&nbsp;назад&nbsp;перед/после&nbsp;движения&nbsp;(как&nbsp;оттягивание&nbsp;рогатки)<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;ELASTIC:&nbsp;пружинные&nbsp;колебания&nbsp;(как&nbsp;резинка)<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;BOUNCE:&nbsp;отскоки&nbsp;(как&nbsp;мячик)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Линейная&nbsp;интерполяция&nbsp;(без&nbsp;сглаживания)<br>
&nbsp;&nbsp;&nbsp;&nbsp;LINEAR&nbsp;=&nbsp;auto()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Квадратичная&nbsp;(t²)&nbsp;—&nbsp;мягкое&nbsp;сглаживание<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_QUAD&nbsp;=&nbsp;auto()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Медленный&nbsp;старт<br>
&nbsp;&nbsp;&nbsp;&nbsp;OUT_QUAD&nbsp;=&nbsp;auto()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Медленный&nbsp;финиш<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_OUT_QUAD&nbsp;=&nbsp;auto()&nbsp;&nbsp;#&nbsp;Медленный&nbsp;старт&nbsp;и&nbsp;финиш<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Кубическая&nbsp;(t³)&nbsp;—&nbsp;умеренное&nbsp;сглаживание<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_CUBIC&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;OUT_CUBIC&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_OUT_CUBIC&nbsp;=&nbsp;auto()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Четвёртая&nbsp;степень&nbsp;(t⁴)&nbsp;—&nbsp;заметное&nbsp;сглаживание<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_QUART&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;OUT_QUART&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_OUT_QUART&nbsp;=&nbsp;auto()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Пятая&nbsp;степень&nbsp;(t⁵)&nbsp;—&nbsp;сильное&nbsp;сглаживание<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_QUINT&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;OUT_QUINT&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_OUT_QUINT&nbsp;=&nbsp;auto()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Синусоидальная&nbsp;—&nbsp;самое&nbsp;мягкое,&nbsp;естественное<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_SINE&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;OUT_SINE&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_OUT_SINE&nbsp;=&nbsp;auto()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Экспоненциальная&nbsp;—&nbsp;очень&nbsp;резкий&nbsp;переход<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_EXPO&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;OUT_EXPO&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_OUT_EXPO&nbsp;=&nbsp;auto()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Круговая&nbsp;—&nbsp;резкий,&nbsp;но&nbsp;плавный&nbsp;(по&nbsp;дуге)<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_CIRC&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;OUT_CIRC&nbsp;=&nbsp;auto()<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_OUT_CIRC&nbsp;=&nbsp;auto()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Отскок&nbsp;назад&nbsp;—&nbsp;выходит&nbsp;за&nbsp;пределы&nbsp;[0,1]&nbsp;перед/после<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_BACK&nbsp;=&nbsp;auto()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Отходит&nbsp;назад&nbsp;перед&nbsp;движением<br>
&nbsp;&nbsp;&nbsp;&nbsp;OUT_BACK&nbsp;=&nbsp;auto()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Проскакивает&nbsp;цель&nbsp;и&nbsp;возвращается<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_OUT_BACK&nbsp;=&nbsp;auto()&nbsp;&nbsp;#&nbsp;Оба&nbsp;эффекта<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Пружина&nbsp;—&nbsp;колебания&nbsp;вокруг&nbsp;цели<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_ELASTIC&nbsp;=&nbsp;auto()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Колебания&nbsp;в&nbsp;начале<br>
&nbsp;&nbsp;&nbsp;&nbsp;OUT_ELASTIC&nbsp;=&nbsp;auto()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Колебания&nbsp;в&nbsp;конце&nbsp;(пружинный&nbsp;эффект)<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_OUT_ELASTIC&nbsp;=&nbsp;auto()&nbsp;&nbsp;#&nbsp;Колебания&nbsp;с&nbsp;обоих&nbsp;сторон<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Отскоки&nbsp;—&nbsp;как&nbsp;падающий&nbsp;мячик<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_BOUNCE&nbsp;=&nbsp;auto()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Отскоки&nbsp;в&nbsp;начале<br>
&nbsp;&nbsp;&nbsp;&nbsp;OUT_BOUNCE&nbsp;=&nbsp;auto()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Отскоки&nbsp;в&nbsp;конце&nbsp;(мячик)<br>
&nbsp;&nbsp;&nbsp;&nbsp;IN_OUT_BOUNCE&nbsp;=&nbsp;auto()&nbsp;&nbsp;#&nbsp;Отскоки&nbsp;с&nbsp;обоих&nbsp;сторон<br>
<br>
<br>
#&nbsp;============================================================================<br>
#&nbsp;Реализации&nbsp;функций&nbsp;сглаживания<br>
#&nbsp;============================================================================<br>
<br>
<br>
def&nbsp;linear(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Линейная:&nbsp;равномерное&nbsp;движение&nbsp;без&nbsp;ускорения.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;t<br>
<br>
<br>
#&nbsp;---&nbsp;Квадратичные&nbsp;(Quad)&nbsp;---<br>
<br>
def&nbsp;in_quad(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Квадратичный&nbsp;вход:&nbsp;медленный&nbsp;старт,&nbsp;t².&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;t&nbsp;*&nbsp;t<br>
<br>
<br>
def&nbsp;out_quad(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Квадратичный&nbsp;выход:&nbsp;медленный&nbsp;финиш.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;(1&nbsp;-&nbsp;t)&nbsp;*&nbsp;(1&nbsp;-&nbsp;t)<br>
<br>
<br>
def&nbsp;in_out_quad(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Квадратичный&nbsp;вход-выход:&nbsp;медленные&nbsp;старт&nbsp;и&nbsp;финиш.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;2&nbsp;*&nbsp;t&nbsp;*&nbsp;t&nbsp;if&nbsp;t&nbsp;&lt;&nbsp;0.5&nbsp;else&nbsp;1&nbsp;-&nbsp;(-2&nbsp;*&nbsp;t&nbsp;+&nbsp;2)&nbsp;**&nbsp;2&nbsp;/&nbsp;2<br>
<br>
<br>
#&nbsp;---&nbsp;Кубические&nbsp;(Cubic)&nbsp;---<br>
<br>
def&nbsp;in_cubic(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Кубический&nbsp;вход:&nbsp;t³.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;t&nbsp;*&nbsp;t&nbsp;*&nbsp;t<br>
<br>
<br>
def&nbsp;out_cubic(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Кубический&nbsp;выход.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;(1&nbsp;-&nbsp;t)&nbsp;**&nbsp;3<br>
<br>
<br>
def&nbsp;in_out_cubic(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Кубический&nbsp;вход-выход.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;4&nbsp;*&nbsp;t&nbsp;*&nbsp;t&nbsp;*&nbsp;t&nbsp;if&nbsp;t&nbsp;&lt;&nbsp;0.5&nbsp;else&nbsp;1&nbsp;-&nbsp;(-2&nbsp;*&nbsp;t&nbsp;+&nbsp;2)&nbsp;**&nbsp;3&nbsp;/&nbsp;2<br>
<br>
<br>
#&nbsp;---&nbsp;Четвёртая&nbsp;степень&nbsp;(Quart)&nbsp;---<br>
<br>
def&nbsp;in_quart(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Четвёртая&nbsp;степень&nbsp;вход:&nbsp;t⁴.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;t&nbsp;**&nbsp;4<br>
<br>
<br>
def&nbsp;out_quart(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Четвёртая&nbsp;степень&nbsp;выход.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;(1&nbsp;-&nbsp;t)&nbsp;**&nbsp;4<br>
<br>
<br>
def&nbsp;in_out_quart(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Четвёртая&nbsp;степень&nbsp;вход-выход.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;8&nbsp;*&nbsp;t&nbsp;**&nbsp;4&nbsp;if&nbsp;t&nbsp;&lt;&nbsp;0.5&nbsp;else&nbsp;1&nbsp;-&nbsp;(-2&nbsp;*&nbsp;t&nbsp;+&nbsp;2)&nbsp;**&nbsp;4&nbsp;/&nbsp;2<br>
<br>
<br>
#&nbsp;---&nbsp;Пятая&nbsp;степень&nbsp;(Quint)&nbsp;---<br>
<br>
def&nbsp;in_quint(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Пятая&nbsp;степень&nbsp;вход:&nbsp;t⁵.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;t&nbsp;**&nbsp;5<br>
<br>
<br>
def&nbsp;out_quint(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Пятая&nbsp;степень&nbsp;выход.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;(1&nbsp;-&nbsp;t)&nbsp;**&nbsp;5<br>
<br>
<br>
def&nbsp;in_out_quint(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Пятая&nbsp;степень&nbsp;вход-выход.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;16&nbsp;*&nbsp;t&nbsp;**&nbsp;5&nbsp;if&nbsp;t&nbsp;&lt;&nbsp;0.5&nbsp;else&nbsp;1&nbsp;-&nbsp;(-2&nbsp;*&nbsp;t&nbsp;+&nbsp;2)&nbsp;**&nbsp;5&nbsp;/&nbsp;2<br>
<br>
<br>
#&nbsp;---&nbsp;Синусоидальные&nbsp;(Sine)&nbsp;---<br>
<br>
def&nbsp;in_sine(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Синусоидальный&nbsp;вход:&nbsp;самое&nbsp;мягкое&nbsp;сглаживание.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;math.cos(t&nbsp;*&nbsp;math.pi&nbsp;/&nbsp;2)<br>
<br>
<br>
def&nbsp;out_sine(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Синусоидальный&nbsp;выход.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;math.sin(t&nbsp;*&nbsp;math.pi&nbsp;/&nbsp;2)<br>
<br>
<br>
def&nbsp;in_out_sine(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Синусоидальный&nbsp;вход-выход.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;-(math.cos(math.pi&nbsp;*&nbsp;t)&nbsp;-&nbsp;1)&nbsp;/&nbsp;2<br>
<br>
<br>
#&nbsp;---&nbsp;Экспоненциальные&nbsp;(Expo)&nbsp;---<br>
<br>
def&nbsp;in_expo(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Экспоненциальный&nbsp;вход:&nbsp;очень&nbsp;медленный&nbsp;старт,&nbsp;резкое&nbsp;ускорение.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0&nbsp;if&nbsp;t&nbsp;==&nbsp;0&nbsp;else&nbsp;2&nbsp;**&nbsp;(10&nbsp;*&nbsp;t&nbsp;-&nbsp;10)<br>
<br>
<br>
def&nbsp;out_expo(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Экспоненциальный&nbsp;выход:&nbsp;резкий&nbsp;старт,&nbsp;очень&nbsp;медленный&nbsp;финиш.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;if&nbsp;t&nbsp;==&nbsp;1&nbsp;else&nbsp;1&nbsp;-&nbsp;2&nbsp;**&nbsp;(-10&nbsp;*&nbsp;t)<br>
<br>
<br>
def&nbsp;in_out_expo(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Экспоненциальный&nbsp;вход-выход.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;==&nbsp;0:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;==&nbsp;1:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;&lt;&nbsp;0.5:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;2&nbsp;**&nbsp;(20&nbsp;*&nbsp;t&nbsp;-&nbsp;10)&nbsp;/&nbsp;2<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(2&nbsp;-&nbsp;2&nbsp;**&nbsp;(-20&nbsp;*&nbsp;t&nbsp;+&nbsp;10))&nbsp;/&nbsp;2<br>
<br>
<br>
#&nbsp;---&nbsp;Круговые&nbsp;(Circ)&nbsp;---<br>
<br>
def&nbsp;in_circ(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Круговой&nbsp;вход:&nbsp;движение&nbsp;по&nbsp;дуге&nbsp;окружности.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;math.sqrt(1&nbsp;-&nbsp;t&nbsp;*&nbsp;t)<br>
<br>
<br>
def&nbsp;out_circ(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Круговой&nbsp;выход.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;math.sqrt(1&nbsp;-&nbsp;(t&nbsp;-&nbsp;1)&nbsp;**&nbsp;2)<br>
<br>
<br>
def&nbsp;in_out_circ(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Круговой&nbsp;вход-выход.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;&lt;&nbsp;0.5:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(1&nbsp;-&nbsp;math.sqrt(1&nbsp;-&nbsp;(2&nbsp;*&nbsp;t)&nbsp;**&nbsp;2))&nbsp;/&nbsp;2<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(math.sqrt(1&nbsp;-&nbsp;(-2&nbsp;*&nbsp;t&nbsp;+&nbsp;2)&nbsp;**&nbsp;2)&nbsp;+&nbsp;1)&nbsp;/&nbsp;2<br>
<br>
<br>
#&nbsp;---&nbsp;Отскок&nbsp;назад&nbsp;(Back)&nbsp;---<br>
<br>
def&nbsp;in_back(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Отскок&nbsp;назад&nbsp;на&nbsp;входе:&nbsp;отходит&nbsp;назад&nbsp;перед&nbsp;движением&nbsp;вперёд.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;c1&nbsp;=&nbsp;1.70158<br>
&nbsp;&nbsp;&nbsp;&nbsp;c3&nbsp;=&nbsp;c1&nbsp;+&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;c3&nbsp;*&nbsp;t&nbsp;*&nbsp;t&nbsp;*&nbsp;t&nbsp;-&nbsp;c1&nbsp;*&nbsp;t&nbsp;*&nbsp;t<br>
<br>
<br>
def&nbsp;out_back(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Отскок&nbsp;назад&nbsp;на&nbsp;выходе:&nbsp;проскакивает&nbsp;цель&nbsp;и&nbsp;возвращается.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;c1&nbsp;=&nbsp;1.70158<br>
&nbsp;&nbsp;&nbsp;&nbsp;c3&nbsp;=&nbsp;c1&nbsp;+&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;+&nbsp;c3&nbsp;*&nbsp;(t&nbsp;-&nbsp;1)&nbsp;**&nbsp;3&nbsp;+&nbsp;c1&nbsp;*&nbsp;(t&nbsp;-&nbsp;1)&nbsp;**&nbsp;2<br>
<br>
<br>
def&nbsp;in_out_back(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Отскок&nbsp;назад&nbsp;на&nbsp;входе&nbsp;и&nbsp;выходе.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;c1&nbsp;=&nbsp;1.70158<br>
&nbsp;&nbsp;&nbsp;&nbsp;c2&nbsp;=&nbsp;c1&nbsp;*&nbsp;1.525<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;&lt;&nbsp;0.5:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;((2&nbsp;*&nbsp;t)&nbsp;**&nbsp;2&nbsp;*&nbsp;((c2&nbsp;+&nbsp;1)&nbsp;*&nbsp;2&nbsp;*&nbsp;t&nbsp;-&nbsp;c2))&nbsp;/&nbsp;2<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;((2&nbsp;*&nbsp;t&nbsp;-&nbsp;2)&nbsp;**&nbsp;2&nbsp;*&nbsp;((c2&nbsp;+&nbsp;1)&nbsp;*&nbsp;(t&nbsp;*&nbsp;2&nbsp;-&nbsp;2)&nbsp;+&nbsp;c2)&nbsp;+&nbsp;2)&nbsp;/&nbsp;2<br>
<br>
<br>
#&nbsp;---&nbsp;Пружина&nbsp;(Elastic)&nbsp;---<br>
<br>
def&nbsp;in_elastic(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Пружина&nbsp;на&nbsp;входе:&nbsp;колебания&nbsp;в&nbsp;начале&nbsp;движения.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;==&nbsp;0:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;==&nbsp;1:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;c4&nbsp;=&nbsp;(2&nbsp;*&nbsp;math.pi)&nbsp;/&nbsp;3<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;-(2&nbsp;**&nbsp;(10&nbsp;*&nbsp;t&nbsp;-&nbsp;10))&nbsp;*&nbsp;math.sin((t&nbsp;*&nbsp;10&nbsp;-&nbsp;10.75)&nbsp;*&nbsp;c4)<br>
<br>
<br>
def&nbsp;out_elastic(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Пружина&nbsp;на&nbsp;выходе:&nbsp;колебания&nbsp;вокруг&nbsp;конечной&nbsp;точки.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;==&nbsp;0:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;==&nbsp;1:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;c4&nbsp;=&nbsp;(2&nbsp;*&nbsp;math.pi)&nbsp;/&nbsp;3<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;2&nbsp;**&nbsp;(-10&nbsp;*&nbsp;t)&nbsp;*&nbsp;math.sin((t&nbsp;*&nbsp;10&nbsp;-&nbsp;0.75)&nbsp;*&nbsp;c4)&nbsp;+&nbsp;1<br>
<br>
<br>
def&nbsp;in_out_elastic(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Пружина&nbsp;на&nbsp;входе&nbsp;и&nbsp;выходе.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;==&nbsp;0:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;==&nbsp;1:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;c5&nbsp;=&nbsp;(2&nbsp;*&nbsp;math.pi)&nbsp;/&nbsp;4.5<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;&lt;&nbsp;0.5:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;-(2&nbsp;**&nbsp;(20&nbsp;*&nbsp;t&nbsp;-&nbsp;10)&nbsp;*&nbsp;math.sin((20&nbsp;*&nbsp;t&nbsp;-&nbsp;11.125)&nbsp;*&nbsp;c5))&nbsp;/&nbsp;2<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(2&nbsp;**&nbsp;(-20&nbsp;*&nbsp;t&nbsp;+&nbsp;10)&nbsp;*&nbsp;math.sin((20&nbsp;*&nbsp;t&nbsp;-&nbsp;11.125)&nbsp;*&nbsp;c5))&nbsp;/&nbsp;2&nbsp;+&nbsp;1<br>
<br>
<br>
#&nbsp;---&nbsp;Отскоки&nbsp;(Bounce)&nbsp;---<br>
<br>
def&nbsp;out_bounce(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Отскоки&nbsp;на&nbsp;выходе:&nbsp;как&nbsp;падающий&nbsp;мячик.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;n1&nbsp;=&nbsp;7.5625<br>
&nbsp;&nbsp;&nbsp;&nbsp;d1&nbsp;=&nbsp;2.75<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;&lt;&nbsp;1&nbsp;/&nbsp;d1:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;n1&nbsp;*&nbsp;t&nbsp;*&nbsp;t<br>
&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;t&nbsp;&lt;&nbsp;2&nbsp;/&nbsp;d1:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;-=&nbsp;1.5&nbsp;/&nbsp;d1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;n1&nbsp;*&nbsp;t&nbsp;*&nbsp;t&nbsp;+&nbsp;0.75<br>
&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;t&nbsp;&lt;&nbsp;2.5&nbsp;/&nbsp;d1:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;-=&nbsp;2.25&nbsp;/&nbsp;d1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;n1&nbsp;*&nbsp;t&nbsp;*&nbsp;t&nbsp;+&nbsp;0.9375<br>
&nbsp;&nbsp;&nbsp;&nbsp;else:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;-=&nbsp;2.625&nbsp;/&nbsp;d1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;n1&nbsp;*&nbsp;t&nbsp;*&nbsp;t&nbsp;+&nbsp;0.984375<br>
<br>
<br>
def&nbsp;in_bounce(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Отскоки&nbsp;на&nbsp;входе.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;out_bounce(1&nbsp;-&nbsp;t)<br>
<br>
<br>
def&nbsp;in_out_bounce(t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Отскоки&nbsp;на&nbsp;входе&nbsp;и&nbsp;выходе.&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;t&nbsp;&lt;&nbsp;0.5:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(1&nbsp;-&nbsp;out_bounce(1&nbsp;-&nbsp;2&nbsp;*&nbsp;t))&nbsp;/&nbsp;2<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(1&nbsp;+&nbsp;out_bounce(2&nbsp;*&nbsp;t&nbsp;-&nbsp;1))&nbsp;/&nbsp;2<br>
<br>
<br>
#&nbsp;============================================================================<br>
#&nbsp;Маппинг&nbsp;Ease&nbsp;enum&nbsp;-&gt;&nbsp;функция<br>
#&nbsp;============================================================================<br>
<br>
_EASE_FUNCTIONS:&nbsp;dict[Ease,&nbsp;Callable[[float],&nbsp;float]]&nbsp;=&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.LINEAR:&nbsp;linear,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_QUAD:&nbsp;in_quad,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.OUT_QUAD:&nbsp;out_quad,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_OUT_QUAD:&nbsp;in_out_quad,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_CUBIC:&nbsp;in_cubic,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.OUT_CUBIC:&nbsp;out_cubic,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_OUT_CUBIC:&nbsp;in_out_cubic,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_QUART:&nbsp;in_quart,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.OUT_QUART:&nbsp;out_quart,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_OUT_QUART:&nbsp;in_out_quart,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_QUINT:&nbsp;in_quint,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.OUT_QUINT:&nbsp;out_quint,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_OUT_QUINT:&nbsp;in_out_quint,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_SINE:&nbsp;in_sine,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.OUT_SINE:&nbsp;out_sine,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_OUT_SINE:&nbsp;in_out_sine,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_EXPO:&nbsp;in_expo,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.OUT_EXPO:&nbsp;out_expo,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_OUT_EXPO:&nbsp;in_out_expo,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_CIRC:&nbsp;in_circ,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.OUT_CIRC:&nbsp;out_circ,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_OUT_CIRC:&nbsp;in_out_circ,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_BACK:&nbsp;in_back,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.OUT_BACK:&nbsp;out_back,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_OUT_BACK:&nbsp;in_out_back,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_ELASTIC:&nbsp;in_elastic,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.OUT_ELASTIC:&nbsp;out_elastic,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_OUT_ELASTIC:&nbsp;in_out_elastic,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_BOUNCE:&nbsp;in_bounce,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.OUT_BOUNCE:&nbsp;out_bounce,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ease.IN_OUT_BOUNCE:&nbsp;in_out_bounce,<br>
}<br>
<br>
<br>
def&nbsp;evaluate(ease:&nbsp;Ease,&nbsp;t:&nbsp;float)&nbsp;-&gt;&nbsp;float:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Вычислить&nbsp;значение&nbsp;функции&nbsp;сглаживания&nbsp;в&nbsp;момент&nbsp;времени&nbsp;t&nbsp;(0..1).&quot;&quot;&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;_EASE_FUNCTIONS[ease](t)<br>
<!-- END SCAT CODE -->
</body>
</html>
