<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>termin/ga201/join.py</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
#!/usr/bin/env&nbsp;python3<br>
<br>
from&nbsp;termin.ga201.point&nbsp;import&nbsp;Point2<br>
from&nbsp;termin.ga201.line&nbsp;import&nbsp;Line2<br>
from&nbsp;termin.ga201.magnitude&nbsp;import&nbsp;Magnitude<br>
import&nbsp;math<br>
<br>
def&nbsp;join_point_point(p,&nbsp;q):<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Line2(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.y*q.z&nbsp;-&nbsp;q.y*p.z,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q.x*p.z&nbsp;-&nbsp;p.x*q.z,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.x*q.y&nbsp;-&nbsp;q.x*p.y<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<br>
def&nbsp;projection_point_line(p,&nbsp;l):<br>
&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;=&nbsp;(l.x*l.x&nbsp;+&nbsp;l.y*l.y)<br>
&nbsp;&nbsp;&nbsp;&nbsp;b&nbsp;=&nbsp;(l.x*p.x&nbsp;+&nbsp;l.y*p.y&nbsp;+&nbsp;l.z*p.z)<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Point2(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;*&nbsp;p.x&nbsp;-&nbsp;b&nbsp;*&nbsp;l.x,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;*&nbsp;p.y&nbsp;-&nbsp;b&nbsp;*&nbsp;l.y,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;*&nbsp;p.z<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<br>
def&nbsp;point_projection(p,&nbsp;l):<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(l,&nbsp;Point2):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;l<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(l,&nbsp;Line2):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;projection_point_line(p,&nbsp;l)<br>
<br>
def&nbsp;meet(l,&nbsp;k):<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Point2(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l.y*k.z&nbsp;-&nbsp;k.y*l.z,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k.x*l.z&nbsp;-&nbsp;l.x*k.z,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l.x*k.y&nbsp;-&nbsp;k.x*l.y<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<br>
def&nbsp;oriented_distance_point_line(p,l):<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Magnitude(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.x*l.x&nbsp;+&nbsp;p.y*l.y&nbsp;+&nbsp;p.z*l.z,&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.z*math.sqrt(l.x*l.x&nbsp;+&nbsp;l.y*l.y))<br>
<br>
def&nbsp;distance_point_point(p,&nbsp;q):<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Magnitude(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;math.sqrt((q.x*p.z&nbsp;-&nbsp;p.x*q.z)**2&nbsp;+&nbsp;(q.y*p.z&nbsp;-&nbsp;p.y*q.z)**2),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abs(p.z*q.z)<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<br>
def&nbsp;oriented_distance(a,&nbsp;b):<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(b,&nbsp;Line2):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;oriented_distance_point_line(a,&nbsp;b)<br>
&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;Exception(&quot;Oriented&nbsp;distance&nbsp;allowed&nbsp;only&nbsp;for&nbsp;hyperplanes&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
<br>
def&nbsp;distance(p,&nbsp;l):<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;abs(oriented_distance(p,&nbsp;l))<br>
<br>
if&nbsp;__name__&nbsp;==&nbsp;&quot;__main__&quot;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;=&nbsp;Point2(1,&nbsp;1)<br>
&nbsp;&nbsp;&nbsp;&nbsp;q&nbsp;=&nbsp;Point2(1,&nbsp;0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;print(join_point_point(p,&nbsp;q))<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;l&nbsp;=&nbsp;Line2(1,&nbsp;1,&nbsp;-1)<br>
&nbsp;&nbsp;&nbsp;&nbsp;print(projection_point_line(Point2(1,&nbsp;1),&nbsp;l))<br>
<br>
<!-- END SCAT CODE -->
</body>
</html>
