<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>utest/visualization_test.py</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
from&nbsp;unittest&nbsp;import&nbsp;mock<br>
<br>
import&nbsp;numpy&nbsp;as&nbsp;np<br>
import&nbsp;pytest<br>
from&nbsp;PIL&nbsp;import&nbsp;Image<br>
<br>
import&nbsp;termin.visualization.mesh&nbsp;as&nbsp;mesh_module<br>
import&nbsp;termin.visualization.shader&nbsp;as&nbsp;shader_module<br>
import&nbsp;termin.visualization.texture&nbsp;as&nbsp;texture_module<br>
from&nbsp;termin.visualization.mesh&nbsp;import&nbsp;MeshDrawable<br>
from&nbsp;termin.visualization.shader&nbsp;import&nbsp;ShaderCompilationError,&nbsp;ShaderProgram<br>
from&nbsp;termin.visualization.texture&nbsp;import&nbsp;Texture<br>
from&nbsp;termin.visualization.ui.elements&nbsp;import&nbsp;UIRectangle<br>
<br>
<br>
class&nbsp;FakeShaderGL:<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_VERTEX_SHADER&nbsp;=&nbsp;0x8B31<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_FRAGMENT_SHADER&nbsp;=&nbsp;0x8B30<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_COMPILE_STATUS&nbsp;=&nbsp;0x8B81<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_LINK_STATUS&nbsp;=&nbsp;0x8B82<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;shader_status=None,&nbsp;shader_logs=None,&nbsp;program_status=None,&nbsp;program_logs=None):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.shader_status&nbsp;=&nbsp;list(shader_status&nbsp;or&nbsp;[])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.shader_logs&nbsp;=&nbsp;list(shader_logs&nbsp;or&nbsp;[])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.program_status&nbsp;=&nbsp;list(program_status&nbsp;or&nbsp;[])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.program_logs&nbsp;=&nbsp;list(program_logs&nbsp;or&nbsp;[])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.next_id&nbsp;=&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.created_shaders&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.created_programs&nbsp;=&nbsp;[]<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;_next_status(self,&nbsp;queue):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;queue.pop(0)&nbsp;if&nbsp;queue&nbsp;else&nbsp;1<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glCreateShader(self,&nbsp;shader_type):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.created_shaders.append(shader_type)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shader_id&nbsp;=&nbsp;self.next_id<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.next_id&nbsp;+=&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;shader_id<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glShaderSource(self,&nbsp;shader,&nbsp;source):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glCompileShader(self,&nbsp;shader):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;_write_pointer(ptr,&nbsp;value):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;hasattr(ptr,&nbsp;&quot;contents&quot;):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ptr.contents.value&nbsp;=&nbsp;value<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ptr._obj.value&nbsp;=&nbsp;value<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glGetShaderiv(self,&nbsp;shader,&nbsp;pname,&nbsp;params):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._write_pointer(params,&nbsp;self._next_status(self.shader_status))<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glGetShaderInfoLog(self,&nbsp;shader):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.shader_logs:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.shader_logs.pop(0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;b&quot;&quot;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glCreateProgram(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;program_id&nbsp;=&nbsp;self.next_id<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.next_id&nbsp;+=&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.created_programs.append(program_id)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;program_id<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glAttachShader(self,&nbsp;program,&nbsp;shader):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glLinkProgram(self,&nbsp;program):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glGetProgramiv(self,&nbsp;program,&nbsp;pname,&nbsp;params):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._write_pointer(params,&nbsp;self._next_status(self.program_status))<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glGetProgramInfoLog(self,&nbsp;program):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.program_logs:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.program_logs.pop(0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;b&quot;&quot;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glDetachShader(self,&nbsp;program,&nbsp;shader):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glDeleteShader(self,&nbsp;shader):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glDeleteProgram(self,&nbsp;program):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glUseProgram(self,&nbsp;program):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glGetUniformLocation(self,&nbsp;program,&nbsp;name):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glUniformMatrix4fv(self,&nbsp;location,&nbsp;count,&nbsp;transpose,&nbsp;value):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glUniform3f(self,&nbsp;location,&nbsp;x,&nbsp;y,&nbsp;z):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glUniform1f(self,&nbsp;location,&nbsp;value):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glUniform1i(self,&nbsp;location,&nbsp;value):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
<br>
class&nbsp;FakeMeshGL:<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_ARRAY_BUFFER&nbsp;=&nbsp;0x8892<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_ELEMENT_ARRAY_BUFFER&nbsp;=&nbsp;0x8893<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_STATIC_DRAW&nbsp;=&nbsp;0x88E4<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_FLOAT&nbsp;=&nbsp;0x1406<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_FALSE&nbsp;=&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_TRIANGLES&nbsp;=&nbsp;0x0004<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_UNSIGNED_INT&nbsp;=&nbsp;0x1405<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_DEPTH_TEST&nbsp;=&nbsp;0x0B71<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.next_id&nbsp;=&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.bound_vao&nbsp;=&nbsp;None<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.bound_vbo&nbsp;=&nbsp;None<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.bound_ebo&nbsp;=&nbsp;None<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.enabled&nbsp;=&nbsp;set()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.draw_calls&nbsp;=&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.last_draw_count&nbsp;=&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.array_buffer_size&nbsp;=&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.element_buffer_size&nbsp;=&nbsp;0<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;_new_id(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;self.next_id<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.next_id&nbsp;+=&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;result<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glGenVertexArrays(self,&nbsp;count):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self._new_id()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glGenBuffers(self,&nbsp;count):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self._new_id()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glBindVertexArray(self,&nbsp;vao):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.bound_vao&nbsp;=&nbsp;vao<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glBindBuffer(self,&nbsp;target,&nbsp;buffer_id):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;target&nbsp;==&nbsp;self.GL_ARRAY_BUFFER:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.bound_vbo&nbsp;=&nbsp;buffer_id<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;target&nbsp;==&nbsp;self.GL_ELEMENT_ARRAY_BUFFER:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.bound_ebo&nbsp;=&nbsp;buffer_id<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glBufferData(self,&nbsp;target,&nbsp;size,&nbsp;data,&nbsp;usage):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;target&nbsp;==&nbsp;self.GL_ARRAY_BUFFER:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.array_buffer_size&nbsp;=&nbsp;size<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;target&nbsp;==&nbsp;self.GL_ELEMENT_ARRAY_BUFFER:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.element_buffer_size&nbsp;=&nbsp;size<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glEnableVertexAttribArray(self,&nbsp;location):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glVertexAttribPointer(self,&nbsp;index,&nbsp;size,&nbsp;dtype,&nbsp;normalized,&nbsp;stride,&nbsp;pointer):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glEnable(self,&nbsp;cap):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.enabled.add(cap)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glDrawElements(self,&nbsp;mode,&nbsp;count,&nbsp;dtype,&nbsp;indices):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.draw_calls&nbsp;+=&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.last_draw_count&nbsp;=&nbsp;count<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glDeleteVertexArrays(self,&nbsp;count,&nbsp;vaos):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glDeleteBuffers(self,&nbsp;count,&nbsp;buffers):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None<br>
<br>
<br>
class&nbsp;FakeTextureGL:<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_TEXTURE_2D&nbsp;=&nbsp;0x0DE1<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_TEXTURE0&nbsp;=&nbsp;0x84C0<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_RGBA&nbsp;=&nbsp;0x1908<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_UNSIGNED_BYTE&nbsp;=&nbsp;0x1401<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_LINEAR_MIPMAP_LINEAR&nbsp;=&nbsp;0x2703<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_LINEAR&nbsp;=&nbsp;0x2601<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_REPEAT&nbsp;=&nbsp;0x2901<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_TEXTURE_MIN_FILTER&nbsp;=&nbsp;0x2801<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_TEXTURE_MAG_FILTER&nbsp;=&nbsp;0x2800<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_TEXTURE_WRAP_S&nbsp;=&nbsp;0x2802<br>
&nbsp;&nbsp;&nbsp;&nbsp;GL_TEXTURE_WRAP_T&nbsp;=&nbsp;0x2803<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.generated_ids&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.bound_texture&nbsp;=&nbsp;None<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.active_unit&nbsp;=&nbsp;None<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.tex_image_calls&nbsp;=&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.params&nbsp;=&nbsp;[]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.mipmaps&nbsp;=&nbsp;0<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glGenTextures(self,&nbsp;count):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tex_id&nbsp;=&nbsp;len(self.generated_ids)&nbsp;+&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.generated_ids.append(tex_id)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tex_id<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glBindTexture(self,&nbsp;target,&nbsp;tex_id):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.bound_texture&nbsp;=&nbsp;tex_id<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glTexImage2D(self,&nbsp;*args,&nbsp;**kwargs):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.tex_image_calls&nbsp;+=&nbsp;1<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glGenerateMipmap(self,&nbsp;target):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.mipmaps&nbsp;+=&nbsp;1<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glTexParameteri(self,&nbsp;target,&nbsp;pname,&nbsp;param):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.params.append((pname,&nbsp;param))<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;glActiveTexture(self,&nbsp;unit):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.active_unit&nbsp;=&nbsp;unit<br>
<br>
<br>
<br>
def&nbsp;test_ui_rectangle_clip_vertices():<br>
&nbsp;&nbsp;&nbsp;&nbsp;rect&nbsp;=&nbsp;UIRectangle(position=(0.25,&nbsp;0.25),&nbsp;size=(0.5,&nbsp;0.5))<br>
&nbsp;&nbsp;&nbsp;&nbsp;verts&nbsp;=&nbsp;rect._to_clip_vertices()<br>
&nbsp;&nbsp;&nbsp;&nbsp;expected&nbsp;=&nbsp;np.array(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.5,&nbsp;-0.5],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtype=np.float32,<br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;np.testing.assert_allclose(verts,&nbsp;expected)<br>
<!-- END SCAT CODE -->
</body>
</html>
